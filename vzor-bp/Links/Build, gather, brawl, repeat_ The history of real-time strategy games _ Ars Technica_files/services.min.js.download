!function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};t[a][0].call(l.exports,function(e){var n=t[a][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t){"use strict";function n(e,t){return u=t,c=e,Promise.resolve()}function r(e){var t={version:e.version,cnsVersion:e.cnsVersion};return new Promise(function(n,r){e.controller.setup(c,e.config,t).then(function(){p[e.name]=e.controller.api,n(e.controller)})["catch"](r)})}function o(e){f[e]&&(l(f[e],function(t){d(t)&&t(p[e])}),f[e]=!1)}function i(e){f=e}function a(e,t){if(d(t)){if(p[e]&&(!f||!f[e]))return void t(p[e]);f[e]||(f[e]=[]),f[e].push(t)}}function s(){return u}var c,u,l=e("@condenast/atp-utl/loop"),d=e("@condenast/atp-utl/type/isFunction"),p={},f={};t.exports={setup:n,extend:r,queue:{set:i,play:o},async:a,about:s}},{"@condenast/atp-utl/loop":60,"@condenast/atp-utl/type/isFunction":76}],2:[function(e,t){function n(e){var t=e||{};d=t&&t.hasAtmo,window._4d=window._4d||{},window.SparrowCache=window.SparrowCache||{events:[],pixels:[]},e&&e.xid_pixels&&m(t.pixels||{})}function r(e,t){return e.map(function(e){return e[t]})}function o(e,t){for(var n=0;n<e.length;n++)for(var r=e[n].brand,o=e[n].channels,i=0;i<o.length;i++){var a=r+":"+o[i];t.push(a)}return t}function i(e){d?g({path:"window._4d.context.atmoprop",poll:{limit:v},onReady:function(){Promise.all([a(e),s(e)]).then(function(){e.process.done()})["catch"](function(t){e.process.failed(t)})},onFailure:function(t){e.process.failed(t.message)}}):Promise.all([a(e),s(e)]).then(function(){e.process.done()})["catch"](function(t){e.process.failed(t)})}function a(e){var t=window._4d.context,n=window.SparrowCache.event;return t&&n?c(e):p({URL:h.content+window.location.href}).then(function(t){return window._4d.context=JSON.parse(t),c(e)})["catch"](function(e){return e.message})}function s(e){var t=f("CN_xid");return window._4d.user?u(e):t?p({URL:h.user+t}).then(function(t){return window._4d.user=JSON.parse(t),window.SparrowCache.event=window.SparrowCache.event||{},u(e)})["catch"](function(e){return e.message}):p({URL:h.infinityid,withCredentials:!0}).then(function(t){return p({URL:h.user+t}).then(function(t){return window._4d.user=JSON.parse(t),u(e)})["catch"](function(e){return e.message})})["catch"](function(e){return e.message})}function c(e){var t=window._4d.context,n={ctx_topics:t.topics&&r(t.topics,"name"),ctx_topic_sc:t.topics&&r(t.topics,"score"),ctx_entities:t.entities&&r(t.entities,"name"),ctx_ent_sc:t.entities&&r(t.entities,"score"),ctx_keywords:t.keywords&&t.keywords.list&&r(t.keywords.list,"keyword"),ctx_kw_sc:t.keywords&&t.keywords.list&&r(t.keywords.list,"score"),atmo:JSON.stringify(t.atmo)||!1,atmovisit:t.atmovisit||!1,atmoprop:t.atmoprop||!1,pid:window.SparrowCache&&window.SparrowCache.event&&window.SparrowCache.event.pID||f("pID")||!1};return l(n,e),Promise.resolve()}function u(e){var t={usr_topics:window._4d.user.topics&&r(window._4d.user.topics,"name"),usr_acq:window._4d.user.acquisitionChannels&&o(window._4d.user.acquisitionChannels,[]),xid:window._4d.user.xid,sid:window.SparrowCache&&window.SparrowCache.event&&window.SparrowCache.event.sID||f("sID")};return l(t,e),Promise.resolve()}function l(e,t){Object.keys(e).forEach(function(n){t.addTargeting(n,e[n])})}var d,p=e("@condenast/atp-utl/ajax"),f=e("@condenast/atp-utl/cookies").get,g=e("@condenast/atp-utl/objects/ready"),m=e("./pixel").pixel,h={content:"//4d.condenastdigital.com/content?url=",infinityid:"//infinityid.condenastdigital.com/?rand="+Date.now(),user:"//4d.condenastdigital.com/user?xid="},v=1e4;t.exports={code:"4d",setup:n,hooks:{onPageCreate:i}}},{"./pixel":3,"@condenast/atp-utl/ajax":45,"@condenast/atp-utl/cookies":51,"@condenast/atp-utl/objects/ready":64}],3:[function(e,t){function n(e,t){var n=t.xidCookieName||"CN_xid",r=a.get(n);return r&&window.location.hostname!==e?new Promise(function(n,i){var a=new Image;a.onerror=function(r){return console.warn("[ cns ads plugin 4d ] XID not propagated for ",e,r),e===s?void o(t).then(function(e){n(e)}):void i()},a.onload=function(){n()},a.src="//"+e+"/infinityid/beacon?id="+encodeURIComponent(r)}):!1}function r(e){function t(){c.forEach(function(e){n(e,o)})}function r(){var e=c.indexOf(s);if(e>=0){c.splice(e,1);var r=n(s,o);r&&r.then(t)}else t()}var o=e||{},i=o.signalCookieName||"xid1";if(!a.get(i))return!1;var c=o.hosts||[],u=document.readyState;return(document.attachEvent?"complete"===u:"loading"!==u)?r():document.addEventListener("DOMContentLoaded",r),!0}function o(e){var t=e.xidCookieName||"CN_xid";return i({URL:"//infinityid.condenastdigital.com/?rand="+Date.now(),cors:!0}).then(function(e){return e&&a.set(t,e,{path:"/",expires:4320}),e})["catch"](function(e){console.log("error resetting xid",e)})}var i=e("@condenast/atp-utl/ajax"),a=e("@condenast/atp-utl/cookies"),s="infinityid.condenastdigital.com";t.exports={pixel:r,resetOurXid:o,propagateXid:n}},{"@condenast/atp-utl/ajax":45,"@condenast/atp-utl/cookies":51}],4:[function(e,t){function n(e){return("trunc|"+e).substr(0,c)}function r(){var e=a("aam_uuid");return e?e.length<=c?e:n(e):null}function o(){var e=a("aamconde"),t=decodeURIComponent(e),n=[],r={};return"false"===t?{conde:[null]}:(n=t.split(";"),n.forEach(function(e){var t=e.split("="),n=t[0].toLowerCase(),o=t[1];r[n]?r[n].push(o):r[n]=[o]}),r)}function i(e){function t(){var i=r(),a=i;a&&e.addTargeting("uuid",[i]);var s=o(),c=null!==s.conde[0];if(c){var u=Object.keys(s);u.forEach(function(t){e.addTargeting(t,s[t])})}var l=a&&c;return l?void e.process.done():void(Date.now()>n?(a||e.addTargeting("uuid",[i]),c||e.addTargeting("conde",[null]),e.process.done()):setTimeout(t,250))}var n=Date.now()+u;t()}var a=e("@condenast/atp-utl/cookies/get"),s=e("@condenast/atp-utl/functions").noop,c=294,u=1e4;t.exports={code:"aam",setup:s,hooks:{onPageCreate:i}}},{"@condenast/atp-utl/cookies/get":5,"@condenast/atp-utl/functions":6}],5:[function(e,t){function n(e){for(var t=document.cookie.split("; "),n=[],r=0;r<t.length;r++)if(n=t[r].split("="),n[0]===e)return decodeURIComponent(n[1]);return!1}t.exports=n},{}],6:[function(e,t){function n(e){throw new Error(e)}function r(e){var t=c(e.func);if(!t)return e.func;var n=e.func(e.payload),r=n instanceof Promise;if(r&&!e.timeout)return n;if(r&&e.timeout){var o=new Promise(function(t){setTimeout(t,e.timeout,{timedOut:!0})});return Promise.race([n,o]).then(function(t){return t&&t.timedOut&&c(e.onTimeout)?e.onTimeout():t})}return Promise.resolve(n)}function o(e){setTimeout(e,0)}function i(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",t=30,n="";t--;)n+=e.charAt(Math.floor(Math.random()*e.length));return n}function a(e,t){var n=new Date(e).getDate()-t,r=new Date(e).setDate(n);return r}function s(e,t){return t>e?!0:!1}var c=e("../type/isFunction");t.exports={error:n,noop:function(){},callbackHandler:r,bump:o,generateRandomID:i,timeTravel:a,checkDate:s}},{"../type/isFunction":7}],7:[function(e,t){function n(e){return!!e&&"function"==typeof e}t.exports=n},{}],8:[function(e,t){function n(e){function t(){function e(e,t){window.apstag._Q.push([e,t])}window.apstag||(window.apstag={init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},_Q:[]})}function n(){var e=document.createElement("script");e.async=!0,e.src=i,document.body.appendChild(e)}function r(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]}var i=e.endpoint,a=e.amazon_id,s="googletag";o=e.eligible_sizes||[],window.cns.amazon_bids=window.cns.amazon_bids||[],t(),n(),r(),window.apstag.init({pubID:a,adServer:s,deals:!0})}function r(e){var t=e.getMeta(),n=t.sizes||[],r=n.filter(function(e){return o.indexOf(e)>-1});if(r.length>0){var a=i(r),s=t.id;window.apstag.fetchBids({slots:[{slotID:s,sizes:a}]},function(t){try{t.length&&(window.cns.amazon_bids[s]=!0),e.process.done()}catch(n){e.process.failed(n)}})}}var o,i=e("../utilities/translate-sizes");t.exports={code:"amzn",setup:n,hooks:{onSlotRequest:r}}},{"../utilities/translate-sizes":9}],9:[function(e,t){function n(e){if(!Array.isArray(e))return[];var t=e.join(" ").split("x").join(",").split(" ");return t.map(function(e){return e.split(",").map(function(e){return parseInt(e,10)})})}t.exports=n},{}],10:[function(e,t){function n(e){c=e}function r(e){var t=c.templates,n=e.getMeta().templateType;return Array.isArray(t)?t.indexOf(n)>=0:/article/.test(n.toLowerCase())}function o(e){var t=document.createElement("script"),n=i(),o=n&&a(n);return n&&"string"==typeof o&&r(e)?(window.arsData=function(t){e.addTargeting("data",t||"null"),e.process.done()},t.setAttribute("src",s(o)),void document.head.appendChild(t)):void e.process.done()}function i(){var e=document.querySelector('meta[name="parsely-page"]'),t=document.querySelector('script[type="application/ld+json"]'),n=e&&e.content,r=t&&t.innerHTML,o=n||r,i=null;if(o)try{i=JSON.parse(o)}catch(a){}return i}function a(e){var t=document.querySelector('link[rel="canonical"]');return e.link||e.url||t&&t.href||null}function s(e){var t=c.endpoint+encodeURIComponent(e)+"?callback=arsData";return t}var c;t.exports={code:"ars",setup:n,hooks:{onPageCreate:o}}},{}],11:[function(e,t){function n(e){if(e&&e.brand){var t=e.brand,n=document.createElement("script");n.async=!0,n.type="text/javascript",n.src="//player.cnevids.com/interlude/"+t+".js",document.body.appendChild(n)}}function r(){window._cne=window._cne||{},window._cne.pageCreated=!0}var o={code:"cne",setup:n,hooks:{onPageCreate:r}};t.exports=o},{}],12:[function(e,t){function n(){var e="//js-sec.indexww.com/ht/htw-condenast.js";if(!document.querySelector('script[src="'+e+'"]')){var t=document.createElement("script");t.async=!0,t.src=e,document.head.appendChild(t)}}function r(){var e="//js-sec.indexww.com/um/ixmatch.html";if(!document.querySelector('iframe[src="'+e+'"]')){var t=document.createElement("iframe");t.width=0,t.height=0,t.frameborder=0,t.scrolling="no",t.src=e,t.style="display: none;",t.marginheight=0,t.marginwidth=0,document.body.appendChild(t)}}function o(){window.headertag=window.headertag||{},window.headertag.cmd=window.headertag.cmd||[],n(),"complete"===document.readyState?r():document.addEventListener("DOMContentLoaded",r)}function i(e,t){e.process.done(t)}function a(e){window.headertag.cmd.push(function(){window.headertag.condeFetchDemand?window.headertag.condeFetchDemand(e,i):setTimeout(function(){window.headertag.condeFetchDemand(e,i)},0)})}t.exports={code:"INDX",setup:o,hooks:{onSlotRequest:a}}},{}],13:[function(e,t){function n(){var e=document.createElement("script"),t="//cdn.mediavoice.com/nativeads/script/condenastcorporate/conde-asa-polar-master.js",n="conde-polar";document.getElementById(n)||(e.id=n,e.async=!0,e.src=t,document.head.appendChild(e))}function r(){n()}function o(e){(window.PolarConde=window.PolarConde||[]).push(["onPageCreate",e]),e.process.done()}function i(e){(window.PolarConde=window.PolarConde||[]).push(["onSlotRenderStart",e]),e.process.done()}t.exports={code:"plr",setup:r,hooks:{onPageCreate:o,onSlotRenderStart:i}}},{}],14:[function(e,t){function n(){r(),o()}function r(){window.CN=window.CN||{},window.CN.ad={proximic:{}}}function o(){var e=document.createElement("script"),t="https:"===document.location.protocol?"https://":"http://",n=t+"segment-data.zqtk.net/conde-nast?url="+encodeURIComponent(window.location.href);e.async=!0,e.src=n,document.head.appendChild(e)}function i(e){a({path:"window.CN.ad.proximic.pxData.data",poll:{limit:800},onReady:function(t){e.addTargeting("segments",t),e.process.done()},onFailure:function(t){e.process.failed(t)}})}var a=e("@condenast/atp-utl/objects/ready");t.exports={setup:n,code:"prx",hooks:{onPageCreate:i}}},{"@condenast/atp-utl/objects/ready":64}],15:[function(e,t){function n(e){return i=e._default||{},s(e,function(e,t){"_default"!==t&&(a[t]={},r(e,t),o(e,t))}),Promise.resolve(a)}function r(e,t){var n=e._default||{};a[t].__default=c({mergeables:[i,n],merger:u})}function o(e,t){s(e,function(e,n){if("_default"!==n){var r=a[t].__default;a[t][n]=c({mergeables:[r,e],merger:u})}})}var i,a={},s=e("@condenast/atp-utl/loop"),c=e("@condenast/atp-utl/objects/merge"),u=e("./merge");t.exports=n},{"./merge":16,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/merge":62}],16:[function(require,module,exports){function merger(e,t,n){switch(isRunningOnClient="undefined"!=typeof window&&window.window,n){case"uris":if(isObj(e))return urisMerger(e,t);break;case"sets":if(isObj(e))return setsMerger(e,t);break;case"types":if(isObj(e))return slotTypeDefinitionsMerger(e,t);break;case"groups":if(!e)return t;if(isObj(e))return groupMerger(e,t);break;case"targeting":if(!e)return t;if(isObj(e))return targetingMerger(e,t);break;case"sizes":if(!e)return t;if(isObj(e))return sizeMerger(e,t);break;case"id":if(!e)return t;if(isObj(e))return idMerger(e,t);break;case"render":if(slotComplexRenderProcessor(e),slotComplexRenderProcessor(t),!e)return t;if(isObj(e))return renderMerger(e,t);break;case"request_vp_range":case"refresh_vp_range":if(!e)return getDeviceDefault(t);if(isObj(e))return vpRangeMerger(e,t);break;case"plugins":if(isObj(e))return pluginMerger(e,t);break;default:if(isArr(e)&&isArr(t))return t}}function urisMerger(e,t){var n=objMerge({mergeables:[e,t]});n.__default=n._default,n._default=null,delete n._default}function setsMerger(e,t){var n=objMerge({mergeables:[e,t]});n.__default=n._default,n._default=null,delete n._default}function groupMerger(e,t){return arrMerge([e,t],!0)}function targetingMerger(e,t){var n=[Object.keys(e),Object.keys(t)],r=arrMerge(n,!0),o={};return loop(r,function(n){if(!e[n])return void(o[n]=t[n]);var r=[e[n],t[n]];o[n]=arrMerge(r,!0)}),o}function idMerger(e,t){var n,r=Object.keys(e),o=Object.keys(t),i=arrMerge([r,o],!0);return r.length&&o.length?(n={},loop(i,function(r){n[r]=t[r]||e[r]})):n=t,n}function sizeMerger(e,t){var n={};return loop(e,function(r,o){if(n[o]=e[o]||[],t[o]){n[o]=arrMerge([n[o],t[o]],!0);var i=n[o].filter(function(e){return/\-/.test(e)}),a=i.map(function(e){return e.replace(/\-/g,"")});n[o]=n[o].filter(function(e){return-1===i.concat(a).indexOf(e)})}}),n}function renderMerger(e,t){var n={};return deviceMerger(n,e,t),t.constellation&&(n.constellation=t.constellation),t.slot&&(n.slot=t.slot),n}function vpRangeMerger(e,t){var n=getDeviceDefault(e),r=getDeviceDefault(t),o=optsMerge(n.__default,r.__default),i={};return loop(r,function(e,t){var n=e.desktop||o.desktop,r=e.tablet||o.tablet,a=e.mobile||o.mobile;i[t]={desktop:n,tablet:r,mobile:a}}),i}function getDeviceDefault(e){var t=clone(e,!0);return t.__default=t._default||t.__default||{desktop:t.desktop,tablet:t.tablet,mobile:t.mobile},delete t._default,delete t.desktop,delete t.tablet,delete t.mobile,t}function deviceMerger(e,t,n){n.desktop&&(e.desktop=n.desktop||e.desktop),n.tablet&&(e.tablet=n.tablet||e.tablet),n.mobile&&(e.mobile=n.mobile||e.mobile)}function slotComplexRenderProcessor(e){return e?e.slot?void slotComplexRenderPreProcessor(e.slot):void loop(e,function(e){slotComplexRenderPreProcessor(e.slot)}):void 0}function slotComplexRenderPreProcessor(e){loop(e,function(e){isObj(e)&&e.every&&e.el&&(e.when&&(e.when=isRunningOnClient&&stringToFunction(e.when)||e.when.toString()),e["in"]&&e["in"].el&&e["in"].when&&(e["in"].when=isRunningOnClient&&stringToFunction(e["in"].when)||e["in"].when.toString()))})}function stringToFunction(string){return eval("("+string+")")}function pluginMerger(e,t){var n={};return loop(t,function(t,r){var o=e[r];n[r]=objMerge({mergeables:[o,t]})}),n}function slotTypeDefinitionsMerger(e,t){var n={};return loop(t,function(r,o){var i=r===!1;n[o]=i?!1:objMerge({mergeables:[e[o],t[o]],merger:merger})}),n}var isObj=require("@condenast/atp-utl/type/isObject"),isArr=require("@condenast/atp-utl/type/isArray"),objMerge=require("@condenast/atp-utl/objects/merge"),optsMerge=require("@condenast/atp-utl/objects/options"),arrMerge=require("@condenast/atp-utl/arrays/merge"),clone=require("@condenast/atp-utl/objects/clone"),loop=require("@condenast/atp-utl/loop"),isRunningOnClient;module.exports=merger},{"@condenast/atp-utl/arrays/merge":48,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/clone":61,"@condenast/atp-utl/objects/merge":62,"@condenast/atp-utl/objects/options":63,"@condenast/atp-utl/type/isArray":68,"@condenast/atp-utl/type/isObject":82}],17:[function(e,t){function n(e,t){return l(e)&&l(t)?t.appendChild(e):!1}function r(e,t){return l(e)&&l(t)?t.insertBefore(e,t.children[0]):!1}function o(e,t){return l(e)&&l(t)?t.parentNode.insertBefore(e,t):!1}function i(e,t){return l(e)&&l(t)?t.parentNode.insertBefore(e,t.nextSibling):!1}function a(e,t){if(!d(e))return!1;var n=l(t)?t:document.querySelector(t);return t&&!n?!1:(n||document).querySelector(e)}function s(e,t){if(!d(e))return!1;var n=l(t)?t:document.querySelector(t);return t&&!n?!1:(n||document).querySelectorAll(e)}function c(e){if(e&&e.el){var t=e.el.className.split(" "),n=e.add&&t.concat(e.add)||t,r=[];e.drop&&p(e.drop,function(e){n.indexOf(e)>-1&&n.splice(n.indexOf(e),1)}),p(n,function(e){n.indexOf(e)>-1&&-1===r.indexOf(e)&&r.push(e)}),requestAnimationFrame(function(){e.el.className=r.join(" ")})}}function u(e){function t(e){var t="(\\s+|^)"+e+"\\:\\s?\\w+;";return new RegExp(t)}if(e&&e.el){var n=e.el.style.cssText.replace(/;/g,"; ");e.add&&p(e.add,function(e,r){var o=r+":"+e+"; ",i=t(r);n=i.test(n)?n.replace(i," "+o):n+o}),e.drop&&p(e.drop,function(e){var r=t(e);n=n.replace(r,"")}),requestAnimationFrame(function(){e.el.style.cssText=n})}}var l=e("@condenast/atp-utl/type/isElement"),d=e("@condenast/atp-utl/type/isString"),p=e("@condenast/atp-utl/loop");t.exports={get:a,getAll:s,prepend:r,append:n,top:r,bottom:n,before:o,after:i,classes:{update:c},styles:{update:u}}},{"@condenast/atp-utl/loop":60,"@condenast/atp-utl/type/isElement":75,"@condenast/atp-utl/type/isString":84}],18:[function(e,t){function n(){return re(document.location.href)||re(document.referrer)?(ce.compile({type:"error",name:"gpt_stopped_PII found",error:{msg:se.haltPII()}}),void(W=!0)):void(G||(d(),p()))}function r(e){var t=[],r=[];G||n(),K(e,function(e){var n=e.id,o=fe[n];o?(c(e),t.push(e)):r.push(a(e))}),o(r),i(t)}function o(e){Promise.all(e).then(i)["catch"](function(e){ce.compile({type:"error",name:"new_tag_creation_error",error:{msg:se.newTagError(e.message),obj:e}})})}function i(e){try{N(e)}catch(t){ce.compile({type:"error",name:"gpt_slot_request_failed",error:{msg:se.requestFailed(t.message),obj:t}})}}function a(e){return new Promise(function(t,n){h(function(){var r=s(e);return r?(r.addService(H.pubads()),I(e,r),c(e),void t(e)):void n(se.cantCreateSlot())})})}function s(e){var t=A(e.sizes),n=e.adUnitPath,r=e.id,o=e.out_of_page;return o?H.defineOutOfPageSlot(n,r):e.companion?H.defineSlot(n,t,r).addService(H.companionAds()):H.defineSlot(n,t,r)}function c(e){var t=fe[e.id],n=t.tag,r=e.pageTargeting,o=e.slotTargeting;u(r),l(n,o)}function u(e){K(e,function(e,t){var n=D(t,e);n&&h(function(){H.pubads().setTargeting(n.key,n.target)})})}function l(e,t){K(t,function(t,n){var r=D(n,t),o=e.getSlotElementId();r&&e.setTargeting(r.key,r.target),window.cns&&window.cns.amazon_bids&&window.cns.amazon_bids[o]&&(window.cns.amazon_bids[o]=!1,window.apstag.setDisplayBids([o]))})}function d(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],H=window.googletag;var e=document.createElement("script");e.async=!0,e.src="//www.googletagservices.com/tag/js/gpt.js",e.id="gpt-script",document.head.appendChild(e),G=!0}function p(){f(),P(),R(),E()}function f(){g(),window.moatCondeListener=m,h(function(){H.pubads().addEventListener("slotRenderEnded",b),H.pubads().addEventListener("impressionViewable",T),H.pubads().addEventListener("slotVisibilityChanged",C)})}function g(){$({path:"googletag.apiReady",poll:{limit:1500},onReady:function(){ce.compile({type:"info",regex:"/tag/js/gpt.js",name:"library_gpt"})},onFailure:function(e){ce.compile({type:"warn",name:"gpt_not_ready",error:{msg:se.notReady(e.message),obj:e}})}})}function m(e){var t=e.adKeywords.zMoatPS;e.wasViewable&&K(fe,function(e){e.name===t&&e.onMOATViewableEvent()})}function h(e){!W&&G&&H.cmd.push(e)}function v(e,t){if(e&&t&&Array.isArray(t)){var n=window.googletag.sizeMapping().addSize([0,0],t).build();e.defineSizeMapping(n)}}function y(e,t){var n=H.pubads().getTargeting(e);n.indexOf(t)<0&&n.push(t),H.pubads().setTargeting(e,n)}function _(e){e.line_item&&(y("ctx_advertisers",e.advertiser),y("ctx_creatives",e.creative),y("ctx_line_items",e.line_item))}function b(e){var t=e.slot.getSlotElementId();const n=new RegExp(/^cns-ads-placeholder-1x1-/);if(!n.test(t)){var r,o=fe[t],i=e.isEmpty,a='[id^="google_ads_iframe"]:not([id$="to_be_removed__"]):not([id$="hidden__"])',s=o.stage.querySelector("iframe"+a),c=o.stage.querySelector("div"+a),u=j(s);_(u),i?(u.isEmpty=!0,u.dimensions={string:null}):(r=x(e.size),u.dimensions=r,u.isEmpty=!1,u.isSized=k(r.string),u.advertiser=w(e.advertiserId),u.creative=w(e.creativeId),u.order=w(e.campaignId),u.lineItem=w(e.lineItemId),o.staticRefreshSize&&!o.setFixedSize&&(v(e.slot,e.size),o.setFixedSize=!0),q(c,s,r)),o.isRefresh=!0,S(o,s),o.onRenderStart(u)}}function w(e){return null===e||void 0===e?"programmatic":e.toString()}function x(e){return{width:e[0],height:e[1],string:e[0]+"x"+e[1]}}function k(e){var t=["1x1"],n=X(t,e)||Y(e,"9x");return!n}function j(e){if(!te(e))return{};var t=e.contentWindow,n=t.cns_ads_meta||t.cns_ads&&t.cns_ads.meta||{};return n}function S(e,t){ae(function(){if(te(t)){var n=t.contentWindow,r=n.document,o=!!r.querySelector('[src*="moatads.com"]');o&&e.onMOATPresent()}})}function q(e,t,n){var r,o;k(n.string)&&(r=n.width,o=n.height,window.requestAnimationFrame(function(){ue.styles.update({el:e,add:{"min-height":o+"px",width:r+"px"}}),ue.styles.update({el:t,add:{"min-height":o+"px",width:r+"px"}})}))}function T(e){var t=e.slot.getSlotElementId(),n=fe[t];n&&Q(n.onImpressionViewable)&&n.onImpressionViewable()}function C(e){var t=e.slot.getSlotElementId(),n=fe[t];n&&Q(n.onVisibilityChange)&&n.onVisibilityChange(e)}function O(){var e=ne("CN_xid");if(e){var t=e.replace(/[^a-zA-Z0-9]/g,""),n=t.length>=32&&t.length<=150;n&&H.pubads().setPublisherProvidedId(t)}}function P(){h(function(){O(),H.pubads().enableSingleRequest(),H.pubads().disableInitialLoad(),H.pubads().enableVideoAds(),H.pubads().setSafeFrameConfig({sandbox:!0}),H.companionAds().setRefreshUnfilledSlots(!0),H.setAdIframeTitle("Advertisement"),H.enableServices()})}function R(){ae(V),setInterval(V,de)}function E(){var e=document.createElement("style"),t=document.createTextNode("");e.classList.add("cns-ads-iframe-styles"),e.appendChild(t),document.head.appendChild(e),e.sheet.insertRule('iframe[id^="google_ads_iframe"],div[id*="google_ads_iframe"] {margin: 0 auto;padding: 0;height: 0;width: 100%;min-width: 100%;}',e.sheet.cssRules.length)}function A(e){var t=[];return K(e,function(e){var n=e.split("x");n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10),t.push(n)}),t}function I(e,t){fe[e.id]={name:e.name,stage:e.stage,staticRefreshSize:e.staticRefreshSize,onIDCheck:e.onIDCheck,onRenderStart:e.onRenderStart,onRenderEnd:e.onRenderEnd,onImpressionViewable:e.onImpressionViewable,onVisibilityChange:e.onVisibilityChange,onMOATPresent:e.onMOATPresent,onMOATViewableEvent:e.onMOATViewableEvent,adUnitPath:e.adUnitPath,hasDefaultPath:e.hasDefaultPath,tag:t,out_of_page:e.out_of_page,id:e.id,forChildren:e.forChildren,page:e.page,isRefresh:!1,sizes:e.sizes}}function D(e,t){var n={};return t&&"null"!==t||0===t?(n.key=Z(e,"_"),n.target=M(t),n.key.length>20&&ce.compile({type:"error",name:"gpt_targeting_key_limit",error:{msg:se.keyExceedsCharLimit(n.key)}}),n):!1}function M(e){return ee(e)?e:e.toString()}function N(e){K(e,function(e){var t=e.id,n=fe[t],r=n,o=r.page;le[o]||(le[o]=[]),L(t,o)||le[o].push(r)})}function L(e,t){var n=!1,r=le[t];return K(r,function(t){t.id===e&&(n=!0)}),n}function V(){h(function(){var e=J(le);le={},K(e,function(e,t){var n=oe(e),r=pe&&n;if(r){if(n){var o=e[0];if(o.out_of_page){var i=o.page;le[i]=le[i]||[],le[i].push(o)}}}else{pe=!1,z(e),F(e),U(e);var a=ie(t,e,ge);H.pubads().refresh(a,{changeCorrelator:!1})}})})}function z(e){var t=0,n=e.map(function(e){return e.forChildren}).filter(Boolean);n.length&&(t=1),H.pubads().setTagForChildDirectedTreatment(t)}function F(e){K(e,function(e){e.isRefresh||H.display(e.id)})}function U(e){e.forEach(function(e){if(e.hasDefaultPath&&!ge[e.page]){var t="cns-ads-placeholder-1x1-"+e.page,n=document.createElement("div");n.id=t,n.style.fontSize=0,n.style.lineHeight=0,n.style.width=0,n.style.height=0,n.style.overflow="hidden",document.body.appendChild(n);var r=H.defineSlot(e.adUnitPath,[[1,1]],t);r.addService(H.pubads()),H.display(t),ge[e.page]=r}})}function B(e){return new Promise(function(t,n){h(function(){var r,o,i,a,s=fe[e];return s?(r=s,o=r&&r.id,i=r&&r.tag,(a=H.destroySlots([i]))?(delete fe[e],void t()):void n(se.cantDestroySlot(o))):void t()})})}var H,G,W,$=e("@condenast/atp-utl/objects/ready"),J=e("@condenast/atp-utl/objects/clone"),Q=e("@condenast/atp-utl/type/isFunction"),K=e("@condenast/atp-utl/loop"),X=e("@condenast/atp-utl/arrays/has"),Y=e("@condenast/atp-utl/strings/startsWith"),Z=e("@condenast/atp-utl/strings/slugify"),ee=e("@condenast/atp-utl/type/isArray"),te=e("@condenast/atp-utl/dom/iframe").isFriendly,ne=e("@condenast/atp-utl/cookies/get"),re=e("./helpers/has-pii.js"),oe=e("./helpers/contains-single-1x1"),ie=e("./helpers/build-tag-list"),ae=e("@condenast/atp-utl/functions").bump,se=e("../lang").err.slots.gpt,ce=e("../reporting"),ue=e("../dom"),le={},de=200,pe=!0,fe={},ge={};t.exports={setup:n,request:r,destroySlot:B}},{"../dom":17,"../lang":23,"../reporting":28,"./helpers/build-tag-list":19,"./helpers/contains-single-1x1":20,"./helpers/has-pii.js":21,"@condenast/atp-utl/arrays/has":47,"@condenast/atp-utl/cookies/get":50,"@condenast/atp-utl/dom/iframe":53,"@condenast/atp-utl/functions":58,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/clone":61,"@condenast/atp-utl/objects/ready":64,"@condenast/atp-utl/strings/slugify":66,"@condenast/atp-utl/strings/startsWith":67,"@condenast/atp-utl/type/isArray":68,"@condenast/atp-utl/type/isFunction":76}],19:[function(e,t){function n(e,t,n){for(var r,o=[],i=0;i<t.length;i++){var a=t[i];a.out_of_page?r=a.tag:o.push(a.tag)}return o.unshift(r?r:n[e]),o}t.exports=n},{}],20:[function(e,t){"use strict";function n(e){return 1===e.length&&(e[0].sizes&&"1x1"===e[0].sizes[0]||e[0].out_of_page===!0)}t.exports=n},{}],21:[function(e,t){function n(e){var t=new RegExp("([a-zA-Z0-9._+-]+(@|%40|%2540)[a-zA-Z0-9._-]+.[a-zA-Z0-9._-]+)","gi");return t.test(e)}function r(e){var t=e.match(/3(?:[47]\d([ -]?)\d{4}(?:\1\d{4}){2}|0[0-5]\d{11}|[68]\d{12})|4(?:\d\d\d)?([ -]?)\d{4}(?:\2\d{4}){2}$|^6011([ -]?)\d{4}(?:\3\d{4}){2}|5[1-5]\d\d([ -]?)\d{4}(?:\4\d{4}){2}|2014\d{11}$|^2149\d{11}|2131\d{11}$|^1800\d{11}$|^3\d{15}/);return null!==t&&t.length?!0:!1}function o(e){var t=e.match(/((\d|([a-f]|[A-F])){2}:){5}(\d|([a-f]|[A-F])){2}/);return null!==t&&t.length?!0:!1}function i(e){var t=e.match(/((0|1[0-9]{0,2}|2[0-9]?|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)\.){3}(0|1[0-9]{0,2}|2[0-9]?|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)/);return null!==t&&t.length?!0:!1}function a(e){return e&&(n(e)||r(e)||o(e)||i(e))?!0:!1}t.exports=a},{}],22:[function(e,t){function n(e,t,n){if(m=t,h=e,n&&(k.setVersion(n.version),E=n,window.BOOMR_mq=window.BOOMR_mq||[],window.BOOMR_mq.push(["addVar","cnsLib",E.cnsVersion])),x.mark("ATP-Init"),k.compile({type:"info",regex:"/services.*js",name:"library_service"}),window.addEventListener("beforeunload",function(){k.compile({type:"info",name:"user_bounce",meta:{time:x.now()}})}),r())return k.compile({type:"info",name:"ads_killed",meta:{cause:"ap_noads_param"}}),Promise.resolve();var i=["interactive","complete"];return q(i,document.readyState)?(R=S.check(),o()):new Promise(function(e,t){document.addEventListener("DOMContentLoaded",function(){R=S.check(),o().then(e)["catch"](t)})})}function r(){var e=w();return!!e.ap_noads}function o(){return _(m.slot.types).then(i)}function i(e){var t=[];t.push(O.setup({timeout:m.timers.plugin_requests_max})),t.push(T.setup({sets:m.slot.sets,onCreate:O.api.runHook.bind(null,"onPageCreate"),uris:m.slot.uris,adBlockStatus:R,cnsVersion:E.cnsVersion})),h.identifiers.overwrite=m.slot.__auid_one;var n=w(),r=n.hasOwnProperty("ao_norefresh")&&"false"!==n.ao_norefresh;return t.push(C.setup({definitions:e,identifiers:h.identifiers,network:m.network,refreshDelay:m.timers.refresh_delay||0,request_vp_range:m.request_vp_range,refresh_vp_range:m.refresh_vp_range,forceDisableRefresh:r,modifiers:m.modifiers,onCreate:O.api.runHook.bind(null,"onSlotCreate"),onImpressionViewable:O.api.runHook.bind(null,"onSlotImpressionViewable"),onRenderEnd:O.api.runHook.bind(null,"onSlotRenderEnd"),onRenderStart:O.api.runHook.bind(null,"onSlotRenderStart"),onRequest:O.api.runHook.bind(null,"onSlotRequest"),onVisibilityChange:O.api.runHook.bind(null,"onSlotVisibilityChange")})),t.push(P.setup()),Promise.all(t)}function a(e){return r()?Promise.resolve():(O.api.add(e.name,{hooks:e.controller.hooks,code:e.controller.code,api:e.controller.api,version:e.version}),e.controller.setup(e.config),Promise.resolve())}function s(e){return v({mergeables:[e.global,e.property],merger:y})}function c(e){return b(e)?(p("ads.slots.getTypeDefinition"),C.api.getTypeDefinition({type:e})):!1}function u(e){return k.compile({type:"flow",name:"api.environment",meta:e}),T.api.environment.apply(null,arguments)}function l(e){return k.compile({type:"flow",name:"api.pages.create",meta:e}),T.api.create.apply(null,arguments)}function d(){return k.compile({type:"flow",name:"api.pages.destroy",meta:name}),T.api.destroy.apply(null,arguments)}function p(e){k.compile({type:"error",name:"deprecated_method_call",error:{msg:j.api.methodDeprecated(e)}})}function f(){return p("adblock.installed"),void 0===R.installed&&(R.installed=R.check()),R.installed}function g(){return p("adblock.blocked"),void 0===R.blocked&&(R.blocked=R.check()),R.blocked}var m,h,v=e("@condenast/atp-utl/objects/merge"),y=e("./configs/merge"),_=e("./configs/hydrate"),b=e("@condenast/atp-utl/type/isString"),w=e("@condenast/atp-utl/parse"),x=e("@condenast/atp-utl/feature").performance,k=e("./reporting"),j=e("./lang").err,S=e("./utilities/adBlock"),q=e("@condenast/atp-utl/arrays/has"),T=e("./pages/manager"),C=e("./slots/manager"),O=e("./plugins/manager"),P=e("./gpt/gpt.js"),R={},E={};t.exports={setup:n,merge:s,extend:a,api:{environment:u,setRefreshFor:C.api.setRefreshFor,pages:{get:T.api.get,create:l,destroy:d},slots:{get:p.bind(null,"ads.slots.get"),create:p.bind(null,"ads.slots.create"),destroy:p.bind(null,"ads.slots.destroy"),getTypeDefinition:c},adBlock:{installed:f,blocked:g}}}},{"./configs/hydrate":15,"./configs/merge":16,"./gpt/gpt.js":18,"./lang":23,"./pages/manager":25,"./plugins/manager":27,"./reporting":28,"./slots/manager":34,"./utilities/adBlock":36,"@condenast/atp-utl/arrays/has":47,"@condenast/atp-utl/feature":55,"@condenast/atp-utl/objects/merge":62,"@condenast/atp-utl/parse":65,"@condenast/atp-utl/type/isString":84}],23:[function(e,t){t.exports={err:{api:{methodDeprecated:function(e){return"[ cns ads ] The method "+e+" has been deprecated and will be removed in a future release."},methodRemoved:function(e){return"[ cns ads ] The method "+e+" has been removed."}},plugins:{requiredPluginsNotReady:function(){return"The required plugins are not ready"}},page:{slot:{alreadyExists:function(e,t){return"The slot '"+e+"' already exists with the '"+t+"' page.\nPlease change the slot name to be unique per page"}}},pages:{setEnvironment:function(){return"[ cns ads page manager ] A device and server type is required for setting up an environment"},hasNoType:function(){return"[ cns ads page manager ] A slot type property is required to add a new slot to a page";

},hasNoTemplateType:function(){return'[ cns ads page manager ] A "templateType" or "template_type" property is required to create a new page'},doesNotExist:function(e){return'[ cns ads page manager ] The requested page "'+e+'" was requested but does not exist.'},slotNotFound:function(e,t){return'[ cns ads Page instance ] The requested slot "'+e+'" was requested but does not exist on page "'+t+'".'}},slots:{definition:{doesNotExist:function(e){return'[ cns ads slot manager ] The definition for the "'+e+'" slot was not found'},hasBadEl:function(e,t,n){return'[ cns ads slot manager ] At the time of staging the "'+e+'" ad slot in page template "'+t+'" the slot\'s el path was not found in the page el "'+n+'"'},tooManyEls:function(e,t){return'[ cns ads slot manager ] The DOM path "'+e+'" for slot type "'+t+'" results in more than one element, to ad slot series use the "every" slot rendering method instead.'},tooManyAdsInEl:function(e){return'[ cns ads slot manager ] The DOM path for slot type "'+e+'" already has a slot staged,  please choose a new location for the "'+e+'" slot type.'},canNotRenderStage:function(e,t,n){return'[ cns ads slot manager ] The slot instance for "'+e+'" could not be appended, either the injection point "'+t+'" is not on the page or the "'+n+'" method is not valid.'},noAppropriateSizes:function(e,t){return'[ cns ads slot manager ] No sizes were given for slot instance "'+e+'" on '+t+". Therefore the ad cannot be rendered."},invalidSlotEl:function(e){return'[ cns ads slot manager ] The slot instance for "'+e+'" does not have a slot el append point or is trying to append to the <html> element'},hasNoRender:function(e,t){return'[ cns ads slot manager ] The slot-type "'+e+'" in the '+t+" template did not have a render block in its instance definition"},slotDestroyFailed:function(e){return"[ cns ads slot manager ] The slot could not be destroyed: "+e}},instance:{alreadyStaged:function(e,t){return'[ cns ads Slot instance ] The slot instance for "'+e+'" on page "'+t+'" could not be staged because it was already staged'}},gpt:{cantCreateSlot:function(){return"[cns ads slots gpt] GPT was unable to create the slot!"},requestFailed:function(e){return"[ cns ads slots gpt ] The request to create or refresh a GPT slot failed: "+e},haltPII:function(){return"[cns ads slots gpt] Personally identifiable information (PII) has been found in the URL, GPT has been halted!"},notReady:function(e){return"[cns ads slots gpt] GPT was unable to load: "+e},cantDestroySlot:function(e){return"[cns ads slots gpt] GPT was unable to destroy the slot with container Id: "+e},newTagError:function(e){return"[cns ads slots gpt] GPT was unable to create a tag: "+e},keyExceedsCharLimit:function(e){return"[cns ads slots gpt] key will not be added to GPT call. Key exceeds 20 character limit: "+e}},destroyedNotExist:function(e){return'The slot instance for "'+e+'" has been destroyed due to its supporting HTML structure being removed from the DOM.'},cantRequestNotStaged:function(e,t){return'The slot instance for "'+e+'" on page "'+t+'" could not be requested because it has not been staged'},invalidProperty:function(e){return'The slot instance for "'+e+'" does not have a valid "property" property'},invalidNetwork:function(e){return'The slot instance for "'+e+'" does not have a valid "network" property'},invalidIdentifiers:function(e){return'The slot instance for "'+e+'" does not have a valid "identifiers" property'},missingProperty:function(e,t){return'The configuration object passed into slot instance "'+e+'" is missing the "'+t+'" property'},singleRequestFailed:function(e,t){var n=t.message||t;return'Request for Slot with name "'+e+'" failed: '+n},linkedRequestFailed:function(e,t){var n=t.message||t;return'Request for Slots with link name "'+e+'" failed: '+n},slotNotFound:function(e){return'[ cns ads slot manager ] The requested slot "'+e+'" does not exist.'},slotNotFoundByDomID:function(e){return'[ cns ads slot manager ] No slot object with domID "'+e+'" was found.'}},adBlock:{detected:function(){return"[ cns ads ] adBlock detected on page."}}}}},{}],24:[function(e,t){function n(e){return this.validate(e)?void this.setup(e):!1}function r(e,t){if(!e)return[];var n=e.toString().split(",");return n.filter(function(e){var n=parseInt(e,10);return m(t,n)})}var o=e("@condenast/atp-utl/functions").callbackHandler,i=e("@condenast/atp-utl/loop"),a=e("@condenast/atp-utl/objects/options"),s=e("@condenast/atp-utl/objects/merge"),c=e("@condenast/atp-utl/arrays/has"),u=e("@condenast/atp-utl/parse"),l=e("@condenast/atp-utl/type/isArray"),d=e("@condenast/atp-utl/type/isFunction"),p=e("@condenast/atp-utl/type/isObject"),f=e("@condenast/atp-utl/feature"),g=e("@condenast/atp-utl/functions").timeTravel,m=e("@condenast/atp-utl/functions").checkDate,h=e("@condenast/atp-utl/functions").noop,v=e("../lang").err.pages,y=e("../reporting"),_=e("../slots/manager").api,b={},w=f.isStorageEnabled();n.prototype.validate=function(e){return e},n.prototype.setup=function(e){this.state=a(b,e),this.cache={},this.targeting={},this.setReferrers(),this.parseForcedURLTargeting(),this.parseQueryStringSpecialCases(),this.processTargeting(),this.setVisitsTargeting(),this.setBucketTargeting(),this.setVideoTargeting(e),this.setVersionTargeting(e.cnsVersion),this.setAdBlockTargeting(e),this.reportMetrics(),this.onCreatePluginHookHandler().then(function(){return this.batchCreateSlots()}.bind(this)).then(this.cacheTheSlots.bind(this))["catch"](function(e){y.compile({type:"error",name:"page_setup_flow_error",error:{msg:e.message,obj:e}})})},n.prototype.setReferrers=function(){var e=document.referrer.split("://")[1]||null,t=null,n=w&&sessionStorage.getItem("ctx_ses_soc")||null,r={fb:"facebook.com",tw:"t.co",rd:"reddit.com",pn:"pinterest.com",ig:"instagram.com",glp:"plus.url.google.com",tbl:"t.umblr.com",qq:"qzone.qq.com",we:"weibo.com",hb:"habbo.com",vk:"vk.com",rr:"renren.com",or:"orkut.google.com",sn:"snapchat.com"};e&&i(r,function(r,o){var i="(^|\\.)"+r;null!==e.match(i)&&(t=o,n=n||w&&sessionStorage.setItem("ctx_ses_soc",o))}),this.state.referrers={social:t,url:e,sessionSocialNetwork:n}},n.prototype.parseForcedURLTargeting=function(){function e(e){var t={},n=e.slice(1).slice(0,-1).split("][");return i(n,function(e){var n=e.split("|");t[n[0]]=n[1].split(",")}),t}var t=u(),n={},r={};t.CNS_ADS_targeting&&(n=e(t.CNS_ADS_targeting)),t.ao_test&&(r.ao_test=t.ao_test),t.ap_test&&(r.ap_test=t.ap_test),this.targeting=s({mergeables:[this.targeting,n,r]})},n.prototype.setVisitsTargeting=function(){if(w){var e=(new Date).getTime(),t=g(e,1),n=g(e,30);sessionStorage.setItem("session-visits",parseInt(sessionStorage.getItem("session-visits"),10)+1||1);var o=sessionStorage.getItem("session-visits"),i=sessionStorage.getItem("new-session"),a=localStorage.getItem("session-visit-dates"),s=localStorage.getItem("total-visits");i||(sessionStorage.setItem("new-session",!0),a=a?a+","+e:e);var c=s?s+","+e:e,u=r(c,t),l=r(c,n),d=r(a,n);localStorage.setItem("total-visits",l.join(",")),localStorage.setItem("session-visit-dates",d.join(",")),this.targeting.sqt=o,this.targeting.sqt24hrs=u.length,this.targeting.usr_pvc_bs=o,this.targeting.usr_pvc_24hr=u.length,this.targeting.usr_pvc_30d=l.length,this.targeting.usr_svc_30d=d.length}},n.prototype.setBucketTargeting=function(){this.targeting.usr_bkt_eva=w&&localStorage.getItem("usr_bkt_eva")||null,this.targeting.usr_bkt_ses=w&&sessionStorage.getItem("usr_bkt_ses")||null,this.targeting.usr_bkt_pv=Math.floor(100*Math.random())+1},n.prototype.setVideoTargeting=function(e){this.targeting.ctx_video=e.video||!1},n.prototype.setAdBlockTargeting=function(e){e.adBlockStatus.blocked&&(this.targeting.ctx_adb_blocked=1),e.adBlockStatus.installed&&(this.targeting.ctx_adb_installed=1)},n.prototype.setVersionTargeting=function(e){e&&(this.targeting.ctx_cns_version=e)},n.prototype.reportMetrics=function(){y.compile({type:"info",name:"page_created",meta:y.helpers.getReportingData(this.state)})},n.prototype.parseQueryStringSpecialCases=function(){var e=["mbid"];this.targeting=this.targeting||{},i(u(),function(t,n){c(e,n)&&(this.targeting[n]=t,this.targeting["url_"+n]=t)}.bind(this))},n.prototype.processTargeting=function(){var e="cnt",t={};i(this.state.targeting,function(n,r){t[e+"_"+r]=n}),this.targeting=s({mergeables:[this.targeting,t]})},n.prototype.onCreatePluginHookHandler=function(){var e=this.state,t={targeting:this.targeting,meta:{property:e.property,templateType:e.templateType,channel:e.channel,subChannel:e.subChannel,slug:e.slug}};return o({func:e.onCreate,payload:t})},n.prototype.batchCreateSlots=function(e,t){return _.batch.create({environment:this.state.environment,page:{slug:this.state.slug,templateType:this.state.templateType,forChildren:this.state.forChildren,channel:this.state.channel,subChannel:this.state.subChannel,targeting:this.targeting,referrers:this.state.referrers,el:this.state.el},onSlotRender:t||this.state.onSlotRender||h,contentURI:this.state.contentURI,slotList:e||this.state.slots})},n.prototype.addSlot=function(e,t){if(!e||p(e)&&!e.type)return void y.compile({type:"warn",name:"page_ad_slot_has_no_type_warning",error:{msg:v.hasNoType()}});var n=p(e)&&e.type,r=p(e)&&e.overwrites,o=_.modifySlotType({type:n?e.type:e,overwrites:r?e.overwrites:t,page:this.state.slug,slug:this.state.slug,channel:this.state.channel,subChannel:this.state.subChannel,template:this.state.templateType}),i=this.batchCreateSlots([o],this.onSlotRenderHandler.bind(this,o.onSlotRender));this.cacheTheSlots(i)},n.prototype.onSlotRenderHandler=function(e,t){this.state.onSlotRender&&this.state.onSlotRender(t),e&&e(t)},n.prototype.cacheTheSlots=function(e){var t=[];return i(e,function(e){t.push({id:e.state.id,type:e.state.type,name:e.state.name,groups:e.state.definition.groups,adUnitPath:e.state.adUnitPath});var n="_"+e.getId();this.cache[n]=e}.bind(this)),this.onPageSlotsAddedHandler(t),Promise.resolve()},n.prototype.onPageSlotsAddedHandler=function(e){d(this.state.onPageSlotsAdded)&&this.state.onPageSlotsAdded({slots:e})},n.prototype.filter=function(e,t){return e?void i(this.cache,function(n,r){var o=Object.keys(e)[0],a=e[o];l(a)&&("types"===o&&i(a,function(e){e===n.getType()&&t(n,r)}),"names"===o&&i(a,function(e){e===n.getName()&&t(n,r)}),"groups"===o&&i(a,function(e){l(n.getGroups())&&c(n.getGroups(),e)&&t(n,r)}))}):void i(this.cache,function(e,n){t(e,n)})},n.prototype.destroy=function(e){window.cns.instanceCount={},this.filter(e,function(e,t){e.destroy(),this.cache[t]=null,delete this.cache[t]}.bind(this))},n.prototype.refresh=function(e){this.filter(e,function(e){e.refresh()})},n.prototype.getSlot=function(e){var t,n=this,r=n.state;return i(n.cache,function(n){var r=n.state.name;r===e&&(t=n)}),t?{destroy:function(){y.compile({type:"flow",name:"api.pages.get(slug).slots.get(name).destroy",meta:e}),n.destroy({names:[e]})},refresh:function(){y.compile({type:"flow",name:"api.pages.get(slug).slots.get(name).refresh",meta:e}),n.refresh({names:[e]})}}:(y.compile({type:"error",name:"can_not_find_slot_on_page",error:{msg:v.slotNotFound(e,r.slug)}}),!1)},t.exports=n},{"../lang":23,"../reporting":28,"../slots/manager":34,"@condenast/atp-utl/arrays/has":47,"@condenast/atp-utl/feature":55,"@condenast/atp-utl/functions":58,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/merge":62,"@condenast/atp-utl/objects/options":63,"@condenast/atp-utl/parse":65,"@condenast/atp-utl/type/isArray":68,"@condenast/atp-utl/type/isFunction":76,"@condenast/atp-utl/type/isObject":82}],25:[function(e,t){function n(e){return f=h(j,e),g=!0,Promise.resolve()}function r(e){if(!g)return!1;var t=b(e,"-"),n=S[t];return n?u(n):(_.compile({type:"error",name:"can_not_find_page",error:{msg:m.doesNotExist(e)}}),!1)}function o(e){if(!g)return!1;if(!e.template_type&&!e.templateType)return _.compile({type:"error",name:"no_page_template_type",error:{msg:m.hasNoTemplateType()}}),!1;e.environment=q,e.property=f.property,e.onCreate=f.onCreate,e.adBlockStatus=f.adBlockStatus,e.cnsVersion=f.cnsVersion,i(),a(e),c(e),e.slots=w(f.sets,{overwrites:e.slots,slug:e.slug,channel:e.channel,subChannel:e.subChannel,templateType:e.templateType});var t=e.subChannel?e.channel+"/"+e.subChannel:e.channel;e.contentURI=e.contentURI||t;var n=new k(e);return n?(S[e.slug]=n,u(n)):Promise.reject()}function i(){if(x){var e=localStorage.getItem("usr_bkt_eva")||null,t=sessionStorage.getItem("usr_bkt_ses")||null;e||localStorage.setItem("usr_bkt_eva",Math.floor(100*Math.random())+1),t||sessionStorage.setItem("usr_bkt_ses",Math.floor(100*Math.random())+1)}}function a(e){s(e,"template_type","templateType"),s(e,"content_uri","contentURI"),s(e,"sub_channel","subChannel"),s(e,"for_children","forChildren")}function s(e,t,n){e[n]=e[t]||e[n],e[t]=null,delete e[t]}function c(e){y(e,function(t,n){"el"!==n&&(e[n]=b(t,"_"))}),e.slug=b(e.slug,"-")}function u(e){function t(t,n){return _.compile({type:"flow",name:"api.pages.get(slug).slots.add",meta:{slotType:t,overwrites:n}}),e.addSlot.apply(e,arguments)}function n(t){return _.compile({type:"flow",name:"api.pages.get(slug).slots.refresh",meta:t}),e.refresh.apply(e,arguments)}function r(t){return _.compile({type:"flow",name:"api.pages.get(slug).slots.destroy",meta:t}),e.destroy.apply(e,arguments)}function o(){return _.compile({type:"flow",name:"api.pages.get(slug).destroy",meta:"undefined"}),d.apply(e)}var i={slots:{add:t,get:e.getSlot.bind(e),refresh:n,destroy:r},addSlot:t,destroy:o};return i}function l(e){return g?e&&e.server&&e.device?(_.setup(e),q=e,Promise.resolve()):Promise.reject(m.setEnvironment()):!1}function d(){if(this.state){var e=this.state.slug;return this.destroy(),S[e]=null,void delete S[e]}}function p(){g&&y(S,function(e,t){e.destroy(),S[t]=null,delete S[t]})}var f,g,m=e("../lang").err.pages,h=e("@condenast/atp-utl/objects/options"),v=e("@condenast/atp-utl/feature"),y=e("@condenast/atp-utl/loop"),_=e("../reporting"),b=e("@condenast/atp-utl/strings/slugify"),w=e("../utilities/typeVariant").getVariantFromURI,x=v.isStorageEnabled(),k=e("./Page"),j={},S={},q={server:"staging",device:"desktop"};t.exports={setup:n,api:{get:r,create:o,destroy:p,environment:l}}},{"../lang":23,"../reporting":28,"../utilities/typeVariant":37,"./Page":24,"@condenast/atp-utl/feature":55,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/options":63,"@condenast/atp-utl/strings/slugify":66}],26:[function(e,t){function n(e){function t(e){if(e&&!Array.isArray(e))throw new Error("hooks must be an array");s=e||[]}function n(e){return-1!==s.indexOf(e)}function r(e){Object.keys(a).forEach(function(t){delete a[t][e]}),c[e]=Date.now()}function o(e,t,n){a[e]||(a[e]={}),a[e][t]=n}function i(t){return t&&t.length?t.every(function(t){return a[t]?s.every(function(n){var r=c[n],o=e&&void 0!==r;return o&&Date.now()>r+e?!0:a[t][n]}):!1}):!0}var a={},s=[],c={};return{setCheckedHooks:t,hasHook:n,trackHook:r,arePluginsReady:i,setStatus:o}}t.exports=n},{}],27:[function(e,t){function n(e){return l=e,x.setCheckedHooks(["onPageCreate"]),d=!0,Promise.resolve()}function r(e,t){d&&(_[e]=t)}function o(e,t){if(!d)return!1;var n,r=s(t);"onSlotRenderStart"===e&&c(t.dom,r);var o=x.hasHook(e);return o&&x.trackHook(e),n=Object.keys(r).reduce(function(n,s){var c=r[s],d=f(t)&&c&&c.hooks[e];if(!d)return n;var p=u(t),g=p(c.code),m=l.timeout?l.timeout:1e3,h=i(g,c,d),v=a(m);o&&h.then(x.setStatus.bind(null,s,e));var y=Promise.race([h,v]);return n.push(y),n},[]),Promise.all(n)["catch"](function(e){h.compile({type:"warn",name:"plugin_manager_promise_flow_failed",error:{msg:e.message,obj:e}})}).then(function(){if("onSlotRequest"===e){var n=t.pluginRules.required;if(!x.arePluginsReady(n))return Promise.reject(new Error(v.err.plugins.requiredPluginsNotReady))}return null})}function i(e,t,n){return new Promise(function(t){function r(){t(!0)}function o(){t(!1)}e.process={done:r,failed:o},n.call(null,e)})}function a(e){return new Promise(function(t){setTimeout(function(){t()},e)})}function s(e){function t(e,t){return Object.keys(e).reduce(function(n,r){var o=e[r];return t(r,o)&&(n[r]=o),n},{})}if(!e.pluginRules)return _;var n=e.pluginRules;return n.blockAll===!0?{}:g(n.allow)&&n.allow.length?t(_,function(e,t){return m(n.allow,t.code.toLowerCase())||m(n.allow,e.toLowerCase())}):g(n.ignore)?t(_,function(e,t){return!m(n.ignore,t.code.toLowerCase())&&!m(n.ignore,e.toLowerCase())}):_}function c(e,t){function n(e,t){p(e.api,function(n,o){r[t][o]=function(){e.api[o].apply(null,arguments)}})}if(t){var r={};p(t,function(e,t){r[t]={},e.api&&n(e,t)}),e.window.cns_ads&&(e.window.cns_ads.plugins=r)}}function u(e){return function(t){var n={};return e.targeting&&(n.addTargeting=function(n,r){var o=b+"_"+t+"_"+n;"rub"===t&&(o=n),e.targeting[o]=r}),e.meta&&(n.getMeta=function(){return e.meta}),e.dom&&(n.getDOM=function(){return e.dom}),n}}var l,d,p=e("@condenast/atp-utl/loop"),f=e("@condenast/atp-utl/type/isObject"),g=e("@condenast/atp-utl/type/isArray"),m=e("@condenast/atp-utl/arrays/has"),h=e("../reporting"),v=e("../lang"),y=e("./hook-status"),_={},b="vnd",w=1e4,x=y(w);t.exports={setup:n,api:{add:r,runHook:o}}},{"../lang":23,"../reporting":28,"./hook-status":26,"@condenast/atp-utl/arrays/has":47,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/type/isArray":68,"@condenast/atp-utl/type/isObject":82}],28:[function(e,t){function n(e){y=e.server,_=e.device,q=!0,o()}function r(e){e&&(P=e)}function o(){b(S,function(e){i(e)})}function i(e){if(q?(e.environment=y,e.meta.device=_,c(e),u(e.type)):S.push(e),/CNS_LOG/.test(window.location.search)){window.cns=window.cns||{},window.cns.logs=window.cns.logs||[];var t=JSON.parse(JSON.stringify(e));t.ts=Date.now(),t.runSec=w.now()/1e3,window.cns.logs.push(t)}}function a(e){var t=s(e),n=t.meta||{};n.ver_cns_ads=P;var r=t.regex?l(t):n,o={campaign:j,error:t.error,meta:r,name:t.name,type:t.type};i(o)}function s(e){if(!e.meta||!e.meta.plugin_name||!e.meta.version)return e;var t="ver_"+e.meta.plugin_name.toLowerCase();return e.meta[t]=e.meta.version,delete e.meta.version,e}function c(e){cns.async("metrics",function(t){t.emit(e)})}function u(e){"error"!==e||T||(console.error("An error has occurred in CNS Ads, use \"cns.log.on('error');\" or \"cns.log.on('all');\" to see the log"),T=!0)}function l(e){var t=window.performance.getEntries(),n=new RegExp(e.regex),r=t.filter(d(n))[0],o=O[e.name];return o.requestStart=r&&r.startTime||o.requestEnd,o.requestEnd=r&&r.responseEnd||o.responseEnd,o.init=w.now(),O[e.name]}function d(e){return function(t){return e.test(t.name)}}function p(){var e=0;return b(document.images,function(t){var n=t.width*t.height;e+=n}),e}function f(e,t){var n=e.cns_ads?e.cns_ads.tracker:{};return x.getData(e,{getErrors:n.getErrors,cutoff:t})}function g(){return/CNS_SB/.test(window.location.search)}function m(e){var t=!!e.page,n=p(),r={content_uri:e.contentURI,image_avg_surface:n&&n/document.images.length,image_count:document.images.length,image_surface:n,server:e.environment&&e.environment.server,usr_bkt_eva:k&&window.localStorage.getItem("usr_bkt_eva"),usr_bkt_ses:k&&window.sessionStorage.getItem("usr_bkt_ses"),vp_height:document.documentElement.clientHeight,vp_width:document.documentElement.clientWidth,is_sandboxed:g()};return t&&v(e,r)||h(e,r)}function h(e,t){return t.channel=e.channel,t.referrers_social=e.referrers&&e.referrers.social,t.referrers_url=e.referrers&&e.referrers.url,t.slots_count=e.slots&&e.slots.length,t.sub_channel=e.subChannel,t.tags=e.targeting&&e.targeting.tags&&[].concat(e.targeting.tags).join(","),t.template=e.templateType,t}function v(e,t){var n=e.context_targeting&&e.context_targeting.ctx_slot_rn||0;return e.report.channel=e.page.channel,e.report.companion=e.definition.companion,e.report.ctx_template=e.page.templateType,e.report.feature_storage=k,e.report.id=e.id,e.report.instance=e.name.split("_").pop(),e.report.name=e.name,e.report.out_of_page="_out_of_page"===e.definition.type,e.report.position_fold=t.vp_height-e.els.container.offsetTop>0?"atf":"btf",e.report.position_xy=e.els.container.offsetTop+"x"+e.els.container.offsetLeft,e.report.referrers_social=e.page.referrers.social,e.report.referrers_url=e.page.referrers.url,e.report.request_number=n,e.report.required_plugins=e.plugins&&e.plugins.required&&"plugin_"+e.plugins.required.join("_plugin_"),e.report.session_social_network=e.page.referrers.sessionSocialNetwork,e.report.sub_channel=e.page.subChannel,e.report.tags=e.page.targeting.cnt_tags&&[].concat(e.page.targeting.cnt_tags).join(","),e.report.template=e.page.templateType,e.report.type=e.type,e.report.CNS_init=O.library_service.init,Object.keys(e.report).forEach(function(n){-1===["object","function"].indexOf(typeof e.report[n])&&(t[n]=e.report[n])}),t}var y,_,b=e("@condenast/atp-utl/loop"),w=e("@condenast/atp-utl/feature").performance,x=e("./tracker"),k=e("@condenast/atp-utl/feature").isStorageEnabled(),j="cns_ads",S=[],q=!1,T=!1,C=w.now(),O={library_gpt:{init:C,requestEnd:C,requestStart:C},library_service:{init:C,requestEnd:C,requestStart:C}},P="0.0.0";t.exports={setup:n,setVersion:r,compile:a,helpers:{getImageArea:p,getTrackerData:f,getReportingData:m}}},{"./tracker":29,"@condenast/atp-utl/feature":55,"@condenast/atp-utl/loop":60}],29:[function(e,t){function n(e){var t=e.match(/\.([^\.\/\?]+)(?:$|\?)/);return t?t[1].toLowerCase():null}function r(e,t,r){var o=e.name,i=r.threshold||.001;if(r.cutoff&&e.startTime<r.cutoff-i)return!1;if(t.initiator&&e.initiatorType===t.initiator)return!0;var a=n(o);return-1!==t.extensions.indexOf(a)}function o(e,t,n){var o={},i=e.performance.getEntries();return g(i,function(e){var i=e.name,a=r(e,t,n);a&&(o[i]=e)}),o}function i(e,t){var n=e[t.attr];return n?!0:!1}function a(e,t){var n={};if(!t.key)return n;var r=e.document[t.key];return g(r,function(e){var r=e[t.attr],o=i(e,t);o&&(n[r]=e)}),n}function s(e){var t={},n=e.document.getElementsByTagName("iframe");return g(n,function(e){var n=e.src;n&&(t[n]=e)}),t}function c(e){return Object.keys(e).length}function u(e,t,n){var r={frames:s(e)},i=t?a:o;return g(h,function(t){r[t.type]=i(e,t,n)}),r}function l(e){var t={js:0,resource:{js:0,css:0,image:0}};return g(e,function(e){if(e.target&&e.target.tagName){var n=e.target.tagName,r=v[n];r&&t.resource[r]++}else t.js++}),t}function d(e){var t={},n=e.performance.getEntries();if(n.length>0){var r=n[n.length-1];t.latestStart=r.startTime}return t}function p(e){var t=l(e.errors),n=t.resource,r=c(e.files.js),o=c(e.files.css),i=c(e.files.images),a=c(e.files.fonts),s=c(e.files.frames),u={fallback:e.fallback,files:{js:r,css:o,images:i,fonts:a,frames:s},raw:{errors:e.errors,files:e.files}};return e.fallback||(u.files.js+=n.js,u.files.css+=n.css,u.files.images+=n.image,u.files.latestStart=e.files.latestStart,u.performance=d(e.win)),u.errors=e.errors?t:{untracked:!0},u}function f(e,t){var n=t||{},r=n.fallback||!m(),o=u(e,r,n),i=n.getErrors?n.getErrors():null,a=p({win:e,files:o,errors:i,fallback:r});return a}var g=e("@condenast/atp-utl/loop"),m=e("@condenast/atp-utl/feature").isGetEntriesEnabled,h={js:{type:"js",initator:"script",extensions:["js"],key:"scripts",attr:"src"},css:{type:"css",extensions:["css"],key:"styleSheets",attr:"href"},images:{type:"images",initiator:"img",extensions:["jpg","jpeg","jpe","jif","jfif","jfi","gif","png","webp","tiff","tif","svg","svgz","bmp","dib","ico"],key:"images",attr:"src"},fonts:{type:"fonts",extensions:["ttf","otf","eot","woff","woff2"]}},v={img:"image",IMG:"image",link:"css",LINK:"css",script:"js",SCRIPT:"js"};t.exports={getData:f}},{"@condenast/atp-utl/feature":55,"@condenast/atp-utl/loop":60}],30:[function(e,t){function n(e){this.setup(e).then(function(){e.onInstantiated&&e.onInstantiated(this)}.bind(this))}var r=e("@condenast/atp-utl/objects/merge"),o=e("@condenast/atp-utl/functions").callbackHandler,i=e("@condenast/atp-utl/animations"),a=e("@condenast/atp-utl/loop"),s=e("@condenast/atp-utl/parse"),c=e("@condenast/atp-utl/type/isString"),u=e("@condenast/atp-utl/type/isNumber"),l=e("@condenast/atp-utl/arrays/has"),d=e("@condenast/atp-utl/strings/slugify"),p=e("@condenast/atp-utl/dom/iframe").isFriendly,f=e("@condenast/atp-utl/feature"),g=f.performance,m=e("@condenast/atp-utl/functions").bump,h=e("../dom"),v=e("../lang").err.slots,y=e("../reporting"),_=e("@condenast/atp-utl/visibility").isHidden,b=e("@condenast/atp-utl/functions").generateRandomID,w=e("../utilities/typeVariant").getVariantFromURI,x=e("./helpers/delayer"),k=e("./helpers/generate-ad-path"),j=1e3,S=!0,q=!0,T=!0;n.prototype.setup=function(e){return this.createStateObject(e),this.state.delayer=x(),this.stage().then(this.addEventListeners.bind(this)).then(this.startRequestabilityLoop.bind(this))["catch"](function(e){y.compile({type:"error",name:"slot_setup_stage_flow",error:{msg:e.message,obj:e}})})},n.prototype.createStateObject=function(e){var t=this.state=e;this.setHighImpactState(),t.GET=s(),t.forceDisableRefresh=t.forceDisableRefresh||!1,t.els={},t.report={created:g.now(),frameContext:{}},t.creative={isEmpty:!1,isRendered:!1,ids:{}},t.request={successes:0,inProgress:!1,timestamp:0},t.ui={hasBeenStaged:!1,isInVPRange:!1,wasTabbed:!1},t.viewability={hasBeenViewed:!1,hasBeenGPTViewed:!1,hasBeenMOATViewed:!1,isMOATPresent:!1,inViewPercentage:0},t.completedCheckInterval=t.completedCheckInterval||j,t.canRenderPostMods=!0,t.plugins={allow:e.definition.plugins,ignore:e.definition.ignore_plugins,blockAll:e.definition.ignore_all_plugins,required:e.definition.required_plugins},this.setRefreshBehavior(t.definition.refresh),this.generateIds(),this.generateTargeting(),this.generateAttributes(),this.setAdUnitPath(e)},n.prototype.setHighImpactState=function(){var e=this.state,t=e.definition.highImpact&&e.definition.highImpact.interval||{},n=t.recurring,r=t.at;switch(n){case"static":e.canBeHighImpact=e.instanceNumber+1===r;break;case"leading":e.canBeHighImpact=e.instanceNumber%r===0;break;case void 0:e.canBeHighImpact=!0;break;default:e.canBeHighImpact=(e.instanceNumber+1)%r===0}},n.prototype.setRefreshBehavior=function(e){var t=this.state,n=t.refreshDelay,r=u(e)?e:n;t.request.onlyOnce=e===!1||t.forceDisableRefresh,t.request.delay=r},n.prototype.generateIds=function(){var e=this.state,t=e.definition.id,n=Date.now()+b(),r=t&&c(t)?t:null,o=t?t[e.environment.device]:null,i="cns_ads_"+n+"_"+e.name,a=r||o,s=h.get("#"+a);e.id=a||n,e.ids={dom_prefix:i,stage:i+"_stage",container:a&&!s?a:i+"_container"}},n.prototype.generateAttributes=function(){var e=this.state,t=e.definition.data,n=t&&t[e.environment.device]||t;e.data={},n&&a(n,function(t,n){e.data["data-"+n]=t})},n.prototype.generateTargeting=function(){this.setEnvTargeting(),this.setContextTargeting(),this.setReportingDataTargeting(),this.setPageTargeting(),this.setSlotTargeting()},n.prototype.setEnvTargeting=function(){var e=this.state;e.env_targeting={env_device_type:e.environment.device,env_server:e.environment.server}},n.prototype.setAdUnitPath=function(e){var t=k(e,this.state);this.state.adUnitPath=t.path,this.state.hasDefaultPath=t.hasDefaultPath},n.prototype.setContextTargeting=function(){var e=this.state;e.context_targeting={ctx_referrer:e.page.referrers.url,ctx_ref_url:e.page.referrers.url,ctx_soc_net:e.page.referrers.social,ctx_ref_soc:e.page.referrers.social,ctx_ses_soc:e.page.referrers.sessionSocialNetwork,ctx_template:e.page.templateType,ctx_page_slug:e.page.slug,ctx_page_channel:e.page.channel,ctx_page_sub_channel:e.page.subChannel,ctx_slot_name:e.name,ctx_slot_instance:e.name,ctx_slot_type:e.type,ctx_slot_rn:0,ctx_slot_manual_rn:0,ctx_video:e.page.targeting.ctx_video}},n.prototype.setReportingDataTargeting=function(){var e=this.state,t=e.environment.device,n=e.page.templateType;e.reporting_data_targeting={rdt_device_template:t+"_"+n}},n.prototype.setSlotTargeting=function(){var e=this.state,t={ctx_slot_name:e.context_targeting.ctx_slot_name,ctx_slot_instance:e.context_targeting.ctx_slot_instance,ctx_slot_type:e.context_targeting.ctx_slot_type,ctx_slot_manual_rn:e.context_targeting.ctx_slot_manual_rn,ctx_slot_rn:e.context_targeting.ctx_slot_rn};e.slot_targeting=r({mergeables:[t,e.onRequest_targeting]})},n.prototype.setPageTargeting=function(){var e=this.state,t={ctx_referrer:e.context_targeting.ctx_referrer,ctx_ref_url:e.context_targeting.ctx_ref_url,ctx_soc_net:e.context_targeting.ctx_soc_net,ctx_ref_soc:e.context_targeting.ctx_ref_soc,ctx_ses_soc:e.context_targeting.ctx_ses_soc,ctx_template:e.context_targeting.ctx_template,ctx_page_slug:e.context_targeting.ctx_page_slug,ctx_page_channel:e.context_targeting.ctx_page_channel,ctx_page_sub_channel:e.context_targeting.ctx_page_sub_channel,ctx_video:e.context_targeting.ctx_video};e.page_targeting=r({mergeables:[e.env_targeting,e.reporting_data_targeting,e.page.targeting,t]})},n.prototype.stage=function(){var e=this.state,t=e.definition.render.slot.method,n=e.definition.render.slot.el;return this.validateStageability(n,t)?this.appendStage(n,t).then(this.onStaged.bind(this))["catch"](function(e){y.log.error({type:"error",name:"slot_stage_flow",error:{msg:e.message,obj:e}})}):Promise.reject(v.definition.canNotRenderStage(e.name,e.definition.render.slot.el,t))},n.prototype.validateStageability=function(e,t){var n=this.state;if(n.ui.hasBeenStaged)return y.compile({type:"error",name:"slot_validate_stageability",error:{msg:v.instance.alreadyStaged(n.name,n.page.slug)}}),!1;var r="function"==typeof h[t],o=document.body.contains(e),i=o&&r;return i},n.prototype.appendStage=function(e,t){return new Promise(function(n,r){var o=this.state;return this.createStageEl(),o.els.stage&&e&&t?(h[t](o.els.stage,e),o.ui.hasBeenStaged=!0,void m(n)):void r()}.bind(this))},n.prototype.createStageEl=function(){var e=this.state,t=d(e.name.toLowerCase(),"-"),n=d(e.type.toLowerCase(),"-"),r="cns-ads-slot-type-",o=document.createElement("div"),i="cns-ads-stage",a=r+n,s=r+t,c=this.createContainerEl();return o.setAttribute("data-name",e.name),o.setAttribute("data-slot-type",e.type),o.id=e.ids.stage,o.classList.add(i),o.classList.add(a),o.classList.add(s),this.setDefaultInlineStyles(o),"_out_of_page"===e.definition.type&&(this.state.isHidden=!0,o.style.height=0,o.style.width=0,o.style.padding=0,o.style.margin=0,o.classList.add("cns-ads-slot-type-out-of-page")),o.appendChild(c),e.els.stage=o,o},n.prototype.createContainerEl=function(){var e=this.state,t=document.createElement("div"),n="cns-ads-container";return t.classList.add(n),t.id=e.ids.container,this.setContainerDataAttrs(t),this.setDefaultInlineStyles(t),t.style.margin="0 auto",t.style.boxSizing="content-box",e.els.container=t,t},n.prototype.setContainerDataAttrs=function(e){var t=this.state.data;Object.keys(t)&&a(t,function(t,n){e.setAttribute(n,t)})},n.prototype.setDefaultInlineStyles=function(e){e.style.fontSize=0,e.style.lineHeight=0,e.style.overflow="hidden"},n.prototype.onStaged=function(){var e=this.state,t={targeting:e.slot_targeting,pluginRules:e.plugins};e.report.staged=g.now(),e.report.pageload_to_staged=e.report.staged;var n=y.helpers.getReportingData(this.state);return e.report.suffix=this.getSuffix(),e.report.CNS_init=n.CNS_init,e.report.CNS_init_to_staged=e.report.staged-e.report.CNS_init,n.CNS_init_to_staged=e.report.CNS_init_to_staged,y.compile({type:"info",name:"slot_staged",meta:n}),o({func:e.onStaged,payload:t})},n.prototype.isInDom=function(){return document.documentElement.contains(this.state.els.container)},n.prototype.checkRequestability=function(e){var t=this.state,n=t.request,r=t.viewability;if(!this.isInDom())return y.compile({type:"error",name:"destroy_called_slot_not_in_dom",error:{msg:v.destroyedNotExist(t.name)}}),this.destroy(),!1;var o=_(t.els.container)&&!t.canBeHidden,i=this.isFirstRequest(),a=!!e,s=t.isUserInteracting&&!a,c=5e3,u=Date.now()>n.timestamp+c,l=Date.now()>n.timestamp+n.delay,d=t.delayer.getDelay()>0,p=a||i&&!d,f=a||r.hasBeenViewed||!r.hasBeenViewed&&u,g=n.inProgress,m=!i&&this.requestOnlyOnce()||o,h=!m&&f&&(p||l)&&!o,b=!g&&h&&this.isInVPRange()&&!s;return b&&(!i&&l&&window.googletag.cmd.push(function(){window.googletag.pubads().updateCorrelator()}),this.setPageTargeting(),this.request()),b},n.prototype.isInVPRange=function(){var e=this.state,t=e.request.timestamp?e.refresh_vp_range:e.request_vp_range,n=w(t,e.page)[e.environment.device];

if(e.els.container){var r=-n,o=document.documentElement.clientHeight+n,i=-n,a=document.documentElement.clientWidth+n,s=e.els.container.getBoundingClientRect();return e.isInViewportRange=s.top<o&&s.bottom>r&&s.left<a&&s.right>i||!e.definition.request_in_vp_only,e.isInViewportRange&&!e.report.inViewport&&(e.report.inViewport=g.now(),e.report.pageLoad_to_in_viewport=e.report.inViewport-e.report.CNS_init),e.isInViewportRange}return!1},n.prototype.request=function(){var e=this.state,t=e.id;return e.ui.hasBeenStaged?void e.onRequest(t):(y.compile({type:"error",name:"slot_request_not_staged",error:{msg:v.cantRequestNotStaged(e.name,e.page.slug)}}),void(e.request.inProgress=!1))},n.prototype.prepareForRequest=function(){var e=this.state,t=e.identifiers.human_slug,n=e.identifiers.overwrite,r=n||t,o=e.context_targeting.ctx_slot_rn+e.context_targeting.ctx_slot_manual_rn,i=e.delayer;e.request.inProgress=!0,e.onRequest_targeting={};var a=e.onPluginHook.bind(null,{targeting:e.onRequest_targeting,meta:{type:e.definition.type,sizes:e.definition.sizes&&e.definition.sizes[e.environment.device],id:e.ids.container,network:e.network,baseUA:r,requestNumber:o},pluginRules:e.plugins}),s=function(){return this.setPreRequestSlotState(),this.reportTrackerData(),this.reportRequestData(),this.setPageTargeting(),this.setSlotTargeting(),i.reset(),!0}.bind(this);return i.execute(a).then(s)["catch"](function(){if(i.isAtThreshold())return s();e.request.inProgress=!1,e.onRequest_targeting={};var t=i.getDelay()-(e.request.delay||0);return e.request.timestamp=Date.now()+t,!1})},n.prototype.getRequestData=function(){function e(){return r&&!t.canBeHighImpact?r.filter(function(e){return-1===o.indexOf(e)}):r}var t=this.state,n=!!t.definition.sizes,r=n?t.definition.sizes[t.environment.device]:void 0,o=t.definition.highImpact&&t.definition.highImpact.sizes||[],i=e();return{name:t.name,out_of_page:"_out_of_page"===t.type,id:t.ids.container,forChildren:t.page.forChildren,companion:t.definition.companion,staticRefreshSize:t.staticRefreshSize,stage:t.els.stage,page:t.page.slug,sizes:i,slotTargeting:t.slot_targeting,pageTargeting:t.page_targeting,adUnitPath:t.adUnitPath,hasDefaultPath:t.hasDefaultPath,onRenderStart:this.onRenderStart.bind(this),onImpressionViewable:this.onImpressionViewable.bind(this),onVisibilityChange:this.onVisibilityChange.bind(this),onMOATViewableEvent:this.onMOATViewable.bind(this),onMOATPresent:this.onMOATPresent.bind(this),onIDCheck:this.onIDCheck.bind(this)}},n.prototype.reportTrackerData=function(){var e=this.state;if(e.report.rendered){var t=this.getTrackerData(),n=this.getCreativeMetrics();n.pageLoad_to_requested=e.report.requested,y.compile({type:"info",name:"slot_collected",meta:r({mergeables:[n,t]})})}},n.prototype.getTrackerData=function(){var e=this.state,t={};if(null===g.now())return t;var n=e.els.iframe;if(n&&p(n)){var r=n.contentWindow,o=e.report.frameRequested||0,i=y.helpers.getTrackerData(r,o),a=i.errors.untracked;t.errors_untracked=a,a||(t.errors_js=i.errors.js,t.errors_resource_js=i.errors.resource.js,t.errors_resource_css=i.errors.resource.css,t.errors_resource_image=i.errors.resource.image),t.files_js=i.files.js,t.files_css=i.files.css,t.files_images=i.files.images,t.files_fonts=i.files.fonts,t.files_frames=i.files.frames,t.files_fallback=i.fallback}return t},n.prototype.setPreRequestSlotState=function(){var e=this.state,t=e.els.iframe;e.report.isRefresh=!0,e.request.inProgress=!0,e.creative.isRendered=!1,e.viewability.hasBeenGPTViewed=!1,e.viewability.hasBeenMOATViewed=!1,e.request.successes++,e.request.timestamp=Date.now(),this.setRefreshBehavior(e.definition.refresh),t&&p(t)&&t.contentWindow.performance&&t.contentWindow.performance.now&&(e.report.frameRequested=t.contentWindow.performance.now())},n.prototype.reportRequestData=function(){var e=this.state;e.report.is_first_Request=S,e.report.requested=g.now(),e.report.pageLoad_to_requested=e.report.requested;var t=y.helpers.getReportingData(this.state);e.report.CNS_init_to_requested=e.report.requested-e.report.CNS_init,t.CNS_init_to_requested=e.report.CNS_init_to_requested,S=!1,e.report.is_first_Request&&(g.mark("ATP-First-Request"),g.measure("ATP-Init-To-First-Request","ATP-Init","ATP-First-Request")),y.compile({type:"info",name:"slot_requested",meta:t})},n.prototype.onImpressionViewable=function(){var e=this.state;e.viewability.hasBeenGPTViewed=!0,e.viewability.hasBeenViewed=!0,e.report.is_first_impression_viewable=T,e.report.impression_Viewable=g.now(),e.report.in_viewport_to_visible_change=e.report.impression_Viewable-e.report.inViewport,e.report.pageLoad_to_gpt_viewable=e.report.impression_Viewable,e.report.CNS_init_to_impression_Viewable=e.report.impression_Viewable-e.report.CNS_init,e.report.request_to_impression_Viewable=e.report.impression_Viewable-e.report.requested;var t=this.getCreativeMetrics();T=!1,e.report.is_first_impression_viewable&&(g.mark("ATP-First-Viewable-Impression"),g.measure("ATP-Init-To-Viewable-Impression","ATP-Init","ATP-First-Viewable-Impression")),y.compile({type:"info",name:"slot_impression_viewable",meta:t})},n.prototype.onVisibilityChange=function(e){var t=this.state,n=t.viewability.isViewable||!1,r=!!e.inViewPercentage;if(r!==n){var o=y.helpers.getReportingData(this.state);if(t.report.now=g.now(),null!==t.report.now&&(t.report.in_viewport_to_visible_change=g.now()-t.report.inViewport,t.report.impression_viewable_to_visible_change=g.now()-t.report.impressionViewable||"impression not viewable"),o.visible_percentage=e.inViewPercentage.toString(),o.visible=r.toString(),t.viewability.inViewPercentage=e.inViewPercentage,t.viewability.isViewable=!!e.inViewPercentage,o.in_viewport_to_visible_change=t.report.in_viewport_to_visible_change,o.impression_viewable_to_visible_change=t.report.impression_viewable_to_visible_change,window.data=o,t.creative.ids&&t.creative.ids.advertiserId){var i=this.getCreativeMetrics();a(Object.keys(i),function(e){o[e]=i[e]})}y.compile({type:"info",name:"slot_visibility_change",meta:o})}},n.prototype.onMOATViewable=function(){var e=this.state;e.viewability.hasBeenMOATViewed=!0,e.viewability.hasBeenViewed=!0},n.prototype.onMOATPresent=function(){var e=this.state;e.viewability.isMOATPresent=!0},n.prototype.onIDCheck=function(){var e=this.state;return e.creative.ids},n.prototype.startRequestabilityLoop=function(){var e=5;return this.checkRequestability(),this.state.fpsLoop=i(this.checkRequestability.bind(this),e),Promise.resolve()},n.prototype.addEventListeners=function(){var e,t=this.state.els.container;return this.userOffAd=function(){this.state.isUserInteracting=!1,clearTimeout(e)}.bind(this),this.userHoverContainer=function(t){this.state.isUserInteracting=!0,e=setTimeout(function(){if("mouseenter"===t.type&&!this.state.report.hoverReported){var e=this.getCreativeMetrics();y.compile({type:"info",name:"slot_hovered",meta:e}),this.state.report.hoverReported=!0}}.bind(this),500)}.bind(this),this.onVisibilityChange=function(){var e=this.state.fpsLoop;e&&(document.hidden?(e.pause(),this.state.ui.wasTabbed=!0):(e.resume(),this.state.ui.wasTabbed&&(this.state.ui.wasTabbed=!1,this.refresh({updateCorrelator:!0}))))}.bind(this),document.addEventListener("visibilitychange",this.onVisibilityChange,!0),t.addEventListener("mouseout",this.userOffAd,!0),t.addEventListener("mouseenter",this.userHoverContainer,!1),Promise.resolve()},n.prototype.onRenderStart=function(e){var t=this.state,n='iframe[id^="google_ads_iframe"]:not([id$="to_be_removed__"]):not([id$="hidden__"])',r=t.els.container.querySelector(n);t.els.iframe=r;var i=!1,a=!1;this.setPostRenderSlotState(e),window.requestAnimationFrame(function(){this.setPostRenderStageElState(e),this.setPostRenderContainerElState(e)}.bind(this)),this.addiFrameEventListeners(),t.report.is_first_rendered=q,t.report.rendered=g.now(),t.report.pageLoad_to_rendered=t.report.rendered,t.report.CNS_init_to_rendered=t.report.rendered-t.report.CNS_init,t.report.request_to_rendered=t.report.rendered-t.report.requested;var s=this.getCreativeMetrics();return q=!1,t.report.is_first_rendered&&(g.mark("ATP-First-Response"),g.measure("ATP-Init-To-First-Response","ATP-Init","ATP-First-Response")),y.compile({type:"info",name:"slot_rendered",meta:s}),p(r)?(i=t.els.iframe.contentWindow,a=i.document):y.compile({type:"info",name:"unfriendly_iframe",meta:s}),o({func:t.onRenderStart,payload:{meta:{renderedSize:e.dimensions.string,domID:e.domID,slotType:t.definition.type,isHidden:t.isHidden,container:t.els.container},dom:{window:i,document:a},render:t.definition.render[t.environment.device],pluginRules:t.plugins}})},n.prototype.setPostRenderSlotState=function(e){var t=this.state,n=!this.isFirstRequest()&&!t.isForcedRequest;t.report.rendered=g.now(),t.request.inProgress=!1,t.creative.isRendered=!0,t.report.hoverReported=!1,t.meta=e,t.meta.domID=t.ids.container,t.creative.renderedSize=e.dimensions.string,t.creative.isEmpty=e.isEmpty,t.creative.ids.advertiserId=e.advertiser,t.creative.ids.creativeId=e.creative,t.creative.ids.lineItem=e.lineItem,t.creative.ids.order=e.order,t.creative.ids.topUnit=e.top_unit,t.creative.ids.unit=e.unit,n&&t.context_targeting.ctx_slot_rn++,t.isForcedRequest&&t.context_targeting.ctx_slot_manual_rn++,t.isForcedRequest=!1,this.setPostRenderMods()},n.prototype.disablePostRenderMods=function(){this.state.canRenderPostMods=!1},n.prototype.setPostRenderMods=function(){function e(e,t){var n=r.creative,o=i[e],a=n[o]||n.ids[o];return l(t,a)}function t(t,n){var r=n.split("|"),i=r[0],s=r[1].trim().split(/\s?\,\s?/),c=e(i,s);c&&a(t,function(e,t){o[t]["with"](e)})}function n(e){a(Object.keys(e),function(e){o[e].withDefaults()})}var r=this.state;if(r.canRenderPostMods){var o={refresh:{"with":this.setRefreshBehavior.bind(this),withDefaults:this.setRefreshBehavior.bind(this,r.definition.refresh)}},i={sizes:"renderedSize","creative-ids":"creativeId","advertiser-ids":"advertiserId"};a(r.definition.mods,n),a(r.definition.mods,t)}},n.prototype.setPostRenderStageElState=function(e){var t=this.state,n=t.creative.isEmpty,r=t.els.stage,o=e.dimensions.string,i=[],a=[],s="1x1"===o;t.lastAdSize&&o&&a.push("cns-ads-slot-size-"+t.lastAdSize),o&&(i.push("cns-ads-slot-size-"+o),t.lastAdSize=o),n?(a.push("cns-ads-slot-state-filled"),i.push("cns-ads-slot-state-empty"),this.state.isHidden=!0):(a.push("cns-ads-slot-state-empty"),i.push("cns-ads-slot-state-filled"),this.state.isHidden=!1,h.styles.update({el:r,drop:["height","width","padding","margin"]})),h.classes.update({el:r,add:i,drop:a}),(n||s)&&h.styles.update({el:r,add:{height:0,width:0,padding:0,margin:0}})},n.prototype.setPostRenderContainerElState=function(e){var t=this.state,n=t.els.container,r=e.dimensions;h.styles.update(e&&e.isSized?{el:n,add:{"min-height":r.height+"px",width:r.width+"px"}}:{el:n,drop:["height","width"]}),"10x1"===r.string&&h.styles.update({el:n,add:{"max-width":"1030px"}})},n.prototype.addiFrameEventListeners=function(){var e=this.getCreativeMetrics();if(p(this.state.els.iframe)){var t=this.state.els.iframe.contentDocument.body;this.userClickedAd=function(){y.compile({type:"info",name:"slot_clicked",meta:e})},t.addEventListener("click",this.userClickedAd,!0),t.addEventListener("touchstart",this.userClickedAd,!0)}},n.prototype.getCreativeMetrics=function(){var e=this.state;return e.report.advertiser_id=e.creative.ids.advertiserId,e.report.creative_id=e.creative.ids.creativeId,e.report.creative_type="sized",e.report.is_empty=e.creative.isEmpty,e.report.line_item_id=e.creative.ids.lineItem,e.report.order_id=e.creative.ids.order,e.report.rendered_size=e.creative.renderedSize,e.report.request_to_rendered=e.report.rendered-e.report.requested,e.report.top_unit_id=e.creative.ids.topUnit,e.report.unit_id=e.creative.ids.unit,y.helpers.getReportingData(this.state)},n.prototype.getId=function(){return this.state.id},n.prototype.getSuffix=function(){return this.state.definition.suffix},n.prototype.getMeta=function(){return this.state.meta},n.prototype.destroy=function(){var e=this.state,t=e.id;return this.removeStageEl(),this.removeEventListeners(),this.removeRequestabilityLoop(),e.onDestroy(t)},n.prototype.removeStageEl=function(){var e=this.state.els.stage,t=e.parentNode;document.documentElement.contains(e)&&document.documentElement.contains(t)&&t.removeChild(e)},n.prototype.removeEventListeners=function(){var e=this.state.els.container;document.removeEventListener("visibilitychange",this.onVisibilityChange,!0),e.removeEventListener("mouseout",this.userOffAd,!0),e.removeEventListener("mouseenter",this.userHoverContainer,!1)},n.prototype.removeRequestabilityLoop=function(){this.state.fpsLoop&&(this.state.fpsLoop.kill(),this.state.fpsLoop=null,delete this.state.fpsLoop)},n.prototype.refresh=function(e){this.state.isForcedRequest=!0,e&&e.updateCorrelator&&window.googletag.cmd.push(function(){window.googletag.pubads().updateCorrelator()}),this.checkRequestability(!0)},n.prototype.getType=function(){return this.state.type},n.prototype.getName=function(){return this.state.name},n.prototype.getGroups=function(){return this.state.definition.groups},n.prototype.isFirstRequest=function(){return 0===this.state.request.successes},n.prototype.requestOnlyOnce=function(){return!!this.state.request.onlyOnce},t.exports=n},{"../dom":17,"../lang":23,"../reporting":28,"../utilities/typeVariant":37,"./helpers/delayer":31,"./helpers/generate-ad-path":32,"@condenast/atp-utl/animations":46,"@condenast/atp-utl/arrays/has":47,"@condenast/atp-utl/dom/iframe":53,"@condenast/atp-utl/feature":55,"@condenast/atp-utl/functions":58,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/merge":62,"@condenast/atp-utl/parse":65,"@condenast/atp-utl/strings/slugify":66,"@condenast/atp-utl/type/isNumber":81,"@condenast/atp-utl/type/isString":84,"@condenast/atp-utl/visibility":86}],31:[function(e,t){function n(e){function t(e){return s(),e}function n(e){return u++,Promise.reject(e)}function o(e){return e().then(t)["catch"](n)}function i(){return u?u>c.length?c[c.length-1]:c[u-1]:0}function a(){return u>c.length}function s(){u=0}var c=e||r,u=0;return{execute:o,getDelay:i,isAtThreshold:a,reset:s}}var r=[250,750,1e3,2e3,3e3];t.exports=n},{}],32:[function(require,module,exports){function generateAdUnitPath(e,t){var n=generatePathOptions(e,t),r=generateQueryPath(n),o=generateNewPath(n),i=generateOldPath(n);return{path:(r||o||i).join("/"),hasDefaultPath:n.hasDefaultPath}}function generatePathOptions(e,t){var n=e.network,r=e.page,o=e.type,i=slugify(e.definition.suffix)||"",a="cm"!==i,s=t.GET,c=e.identifiers.overwrite,u="."+i.replace(/polar/,"dart"),l=e.contentURI,d=e.modifiers,p="cm"===i||"polar"===i,f=!!d&&!p;return{network:n,page:r,type:o,suffix:i,hasDefaultPath:a,queryParams:s,baseAU:c,firstLevelAU:u,templateURI:l,modifiers:d,shouldUseOldPath:p,shouldUseNewPath:f}}function slugifyURI(e){return e?e.split("/").map(slugify).join("/"):""}function generateQueryPath(e){var t=e.queryParams,n=t.ao_iu&&t.ao_iu.split(",");return n&&n.unshift(e.network),n}function generateOldPath(e){var t=e.modifiers&&e.modifiers.buildLegacyAdPath;if(t){var n=evalBuildAdPathString(t);return[n(e.suffix)]}return[e.network,e.baseAU+e.firstLevelAU,slugifyURI(e.templateURI)]}function generateNewPath(e){if(e.shouldUseNewPath){var t=findPosition(e),n={network:e.network,position:t,contentType:findContentType(e),category:findCategory(e),instance:countInstance(t)},r=e.modifiers.buildAdPath,o=evalBuildAdPathString(r);return[o(n)]}}function findPosition(e){var t=e.modifiers.positionMap,n=e.type;return searchMap(t,n)||"misc"}function findContentType(e){var t=e.modifiers.contentTypeMap,n=e.page.templateType;return searchMap(t,n)||"undefined"}function findCategory(e){var t=e.templateURI,n=t?slugify(t):"misc";return"home"===n?"homepage":n}function countInstance(e){window.cns.instanceCount=window.cns.instanceCount||{};var t=window.cns.instanceCount;return Object.prototype.hasOwnProperty.call(t,e)?t[e]+=1:t[e]=1,t[e]}function searchMap(e,t){return e?Object.keys(e).reduce(function(n,r){return e[r].indexOf(t)>-1?r:n},!1):void 0}function evalBuildAdPathString(string){try{return eval("("+string+")")}catch(error){return function(){}}}var slugify=require("@condenast/atp-utl/strings/slugify");module.exports=generateAdUnitPath},{"@condenast/atp-utl/strings/slugify":66}],33:[function(e,t){function n(e,t){return e?t&&t.device?"string"==typeof e?e:e[t.device]:"object"==typeof e?void 0:e:void 0}t.exports={getLink:n}},{}],34:[function(e,t){function n(e){P=E(ee,e),R=!0,r()}function r(){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet.insertRule(".cns-ads-stage {margin: 0 auto;padding: 0;width: 100%;}",0)}function o(e){var t=[];return R?(I(e.slotList,function(n){var r=i({NoD:n,page:e.page,environment:e.environment,onSlotRender:e.onSlotRender,contentURI:e.contentURI});t=t.concat(r)}),t):!1}function i(e){var t=a({NoD:e.NoD,page:e.page,environment:e.environment});if(!t.instances)return!1;var n=[];return I(t.instances,function(r){te[t.type]="undefined"!=typeof te[t.type]?te[t.type]+1:0;var o=v({instanceNumber:te[t.type],name:t.type+"_"+te[t.type],type:t.type,environment:e.environment,sizes:r.sizes&&r.sizes[e.environment.device],page:e.page,definition:r,contentURI:e.contentURI,onRenderStart:e.onSlotRender,modifiers:e.modifiers});o&&n.push(o)}),n}function a(e){var t=s({type:e.NoD,page:e.page.slug,slug:e.page.slug,channel:e.page.channel,subChannel:e.page.subChannel,template:e.page.templateType}),n=c(t,e.page,e.environment);return{type:t.type,instances:n}}function s(e){if(!R)return!1;var t=D(e.type),n=t?e.type:P.definitions[e.type];if(!n)return Q.compile({type:"warn",name:"slot_manager_type_does_not_exist",error:{msg:G.definition.doesNotExist(e.type)}}),!1;var r=t?n:X(n,{slug:e.slug,channel:e.channel,subChannel:e.subChannel,templateType:e.template,overwrites:e.overwrites}),o=A(r,!0);return o.type=o.type||e.type,o.customized=t,o}function c(e,t,n){var r=t.el||"html",o=r instanceof HTMLElement?r:document.querySelector(r),i=e.render,a=[];if(!i)return Q.compile({type:"warn",name:"slot_manager_no_renderer",error:{msg:G.definition.hasNoRender(e.type,t.templateType)}}),a;var s=n.device,c=u(e,s);return I(c,function(n,i){if(!V(n)&&!F(n)){var s=D(n)&&!L(n)&&!z(n),c=s?f:l,u=c({definition:e,pageEl:o,type:i,rules:n});u&&u.length||Q.compile({type:"warn",name:"slot_manager_bad_el",error:{msg:G.definition.hasBadEl(e.type,t.templateType,r)}}),I(u,function(e){a.push(e)})}}),a}function u(e,t){var n=e.render.slot,r=e.render[t]&&e.render[t].slot;return n||r}function l(e){var t=N(e.rules)?d(e):[].concat(e.rules),n=t.length,r=h.bind(null,e.definition,ne[e.type]),o=[];return t&&(N(e.rules)||L(e.rules)||z(e.rules))?(n>1&&Q.compile({type:"warn",name:"multiple_render_points",error:{msg:G.definition.tooManyEls(e.rules,e.definition.type)}}),I(t,function(t){p(t,ne[e.type])?Q.compile({type:"error",name:"multiple_slots_in_el",error:{msg:G.definition.tooManyAdsInEl(e.definition.type)}}):o.push(r(t))}),o):!1}function d(e){function t(e,t){var r=n.contains(t);return r?e.concat([t]):e}var n=e.pageEl,r=document.querySelectorAll(e.rules),o=Array.prototype.reduce.call(r,t,[]);return o}function p(e,t){var n;switch(t){case"before":case"above":n=e.previousSibling;break;case"after":case"below":n=e.nextSibling;break;case"prepend":case"top":n=e.firstChild;break;default:n=e.lastChild}return n&&n.classList&&n.classList.contains("cns-ads-stage")}function f(e){var t=H.get(e.rules["in"].el,e.pageEl),n=H.getAll(e.rules.el,t),r=h.bind(null,e.definition,ne[e.type]),o=e.rules&&e.rules.when&&M(e.rules.when),i=!!e.rules["in"]&&!!e.rules["in"].when&&M(e.rules["in"].when),a=!i&&t||i&&t&&e.rules["in"].when(t),s=0,c=0;if(!a)return[];var u=1,l=[],d=!1;return I(n,function(t,i){var a=g(n.length,i),p=m(t);a.wordCount=p.split(" ").length,a.characterCount=p.split("").length,s+=a.wordCount,a.accumulatedWordCount=s,c+=a.characterCount,a.accumulatedCharacterCount=c;var f=!o||o&&e.rules.when(t,a),h=u>=e.rules.every;return h&&f||!h&&d?(l.push(r(t)),u=1,void(d=!1)):(h&&!f&&(d=!0),void(u+=1))}),l}function g(e,t){return{index:t,isOdd:!!(t%2),isEven:!(t%2),isFirst:0===t,isLast:t===e-1}}function m(e){var t="";return I(e.childNodes,function(e){8!==e.nodeType&&(t+=1!==e.nodeType?e.nodeValue:m(e))}),t}function h(e,t,n){var r=A(e,!0);return r.render.slot={el:n,method:t},r}function v(e){if(!R)return!1;var t,n=E(e,{linkByInstance:e.definition.link_by_instance,canBeHidden:e.definition.can_be_hidden,refreshDelay:P.refreshDelay,network:P.network,identifiers:P.identifiers,staticRefreshSize:e.definition.static_refresh_size,request_vp_range:P.request_vp_range,refresh_vp_range:P.refresh_vp_range,forceDisableRefresh:P.forceDisableRefresh,onStaged:P.onCreate,onDestroy:j,onRequest:_,onPluginHook:P.onRequest,onRenderStart:y.bind(null,e.onRenderStart),onRenderEnd:P.onRenderEnd,onImpressionViewable:P.onImpressionViewable,onVisibilityChange:P.onVisibilityChange,modifiers:P.modifiers});return $(n)?(t=new W(n),Z[t.state.id]=t,t):!1}function y(e,t){var n=t.meta.renderedSize,r=t.meta.domID,o=!!t.meta.isHidden,i=t.meta.container,a=t.meta.slotType,s={getCreativeType:function(){return"sized"},getContainerEl:function(){return i},getContainerId:function(){return r},getServerSize:function(){return n},getSlotType:function(){return a},isHidden:function(){return o}};P.onRenderStart(t),e(s)}function _(e){var t=Z[e],n=t.state,r=Y.getLink(n.definition.link,n.environment),o=n.instanceNumber,i=n.request.inProgress,a=n.linkByInstance;r?b({linkName:r,instanceGroup:o,requestByInstance:a}):i||t.prepareForRequest().then(function(e){e&&J.request([t.getRequestData()])})["catch"](function(e){Q.compile({type:"error",name:"slot_manager_slot_request_flow",error:{msg:G.singleRequestFailed(n.name,e),obj:e}})})}function b(e){var t=w(e.linkName),n=x(t),r=[];n||(I(t,function(t){var n=t.state,o=k(n,e);t.isInDom()||(Q.compile({type:"error",name:"destroy_called_slot_not_in_dom",error:{msg:G.destroyedNotExist(n.name)}}),t.destroy(),o=!1),o&&r.push(t.prepareForRequest().then(function(e){return e?t.getRequestData():!1}))}),Promise.all(r).then(function(e){var t=e.every(function(e){return e});t&&J.request(e)})["catch"](function(t){Q.compile({type:"error",name:"slot_manager_linked_slot_request_flow",error:{msg:G.linkedRequestFailed(e.linkName,t),obj:t}})}))}function w(e){for(var t=[],n=Object.keys(Z),r=0;r<n.length;r++){var o=Z[n[r]],i=Y.getLink(o.state.definition.link,o.state.environment);i===e&&t.push(o)}return t}function x(e){var t=!1;return I(e,function(e){var n=e.requestOnlyOnce(),r=!e.isFirstRequest();n&&r&&(t=!0)}),t}function k(e,t){var n=e.instanceNumber,r=!e.linkByInstance||!t.requestByInstance,o=n===t.instanceGroup||r,i=!K(e.els.container)||e.canBeHidden;return o&&i}function j(e){var t,n=Z[e];return n?(t=n.state.ids.container,J.destroySlot(t).then(function(){S(e)})["catch"](function(e){Q.compile({type:"error",name:"slot_manager_destroy_flow",error:{msg:G.definition.slotDestroyFailed(e),obj:e}})})):Promise.resolve()}function S(e){Z[e]=null,delete Z[e]}function q(e){var t;return R?(t=Z[e],t?{destroy:function(){Q.compile({type:"flow",name:"api.slots.get(name).destroy",meta:e}),t.destroy()},refresh:function(){Q.compile({type:"flow",name:"api.slots.get(name).refresh",meta:e}),t.refresh()}}:(Q.compile({type:"error",name:"can_not_find_slot",error:{msg:G.slotNotFound(e)}}),!1)):!1}function T(){var e=[];return R?(I(Z,function(t,n){e.push(t.destroy().then(function(){Z[n]=null,delete Z[n]}))}),Promise.all(e)):Promise.resolve()}function C(e){if(!R)return!1;var t=s({type:e.type,page:e.page,template:e.template});return U({mergeables:[t,e.overwrites],merger:B})}function O(e,t){var n=e.frameElement.parentElement.parentElement.id,r=n&&n.split("_").length>2&&n.split("_")[2],o=Object.keys(Z);if(o.indexOf(r)>-1){var i=Z[r];return i.disablePostRenderMods(t),i.setRefreshBehavior(t),void Q.compile({type:"info",name:"Refresh set from API",error:{msg:"refresh set "+t+" through API for slot "+i.state.name}})}Q.compile({type:"warn",name:"unable_to_find_slot_with_domID_"+n,error:{msg:G.slotNotFoundByDomID(n)}})}var P,R,E=e("@condenast/atp-utl/objects/options"),A=e("@condenast/atp-utl/objects/clone"),I=e("@condenast/atp-utl/loop"),D=e("@condenast/atp-utl/type/isObject"),M=e("@condenast/atp-utl/type/isFunction"),N=e("@condenast/atp-utl/type/isString"),L=e("@condenast/atp-utl/type/isElement"),V=e("@condenast/atp-utl/type/isWindowObject"),z=e("@condenast/atp-utl/type/isDOMElementCollection"),F=e("@condenast/atp-utl/type/isDocumentObject"),U=e("@condenast/atp-utl/objects/merge"),B=e("../configs/merge"),H=e("../dom"),G=e("../lang").err.slots,W=e("./Slot"),$=e("./validateSlot.js"),J=e("../gpt/gpt.js"),Q=e("../reporting"),K=e("@condenast/atp-utl/visibility").isHidden,X=e("../utilities/typeVariant").getVariantFromURI,Y=e("./helpers/manager-util"),Z={},ee={},te={},ne={top:"prepend",bottom:"append",below:"after",after:"after",before:"before",above:"before"};t.exports={setup:n,api:{get:q,getTypeDefinition:s,create:v,modifySlotType:C,destroy:T,batch:{create:o},setRefreshFor:O}}},{"../configs/merge":16,"../dom":17,"../gpt/gpt.js":18,"../lang":23,"../reporting":28,"../utilities/typeVariant":37,"./Slot":30,"./helpers/manager-util":33,"./validateSlot.js":35,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/clone":61,"@condenast/atp-utl/objects/merge":62,"@condenast/atp-utl/objects/options":63,"@condenast/atp-utl/type/isDOMElementCollection":71,"@condenast/atp-utl/type/isDocumentObject":74,"@condenast/atp-utl/type/isElement":75,"@condenast/atp-utl/type/isFunction":76,"@condenast/atp-utl/type/isObject":82,"@condenast/atp-utl/type/isString":84,"@condenast/atp-utl/type/isWindowObject":85,"@condenast/atp-utl/visibility":86}],35:[function(e,t){function n(e){return r(e)&&o(e)&&i(e)&&a(e)&&s(e)}function r(e){var t,n;return e.name?(t=e.name,e.environment?e.environment.device?e.definition?e.definition.sizes||"_out_of_page"===e.type?e.identifiers?e.network?e.definition.render&&e.definition.render.slot&&e.definition.render.slot.el?!0:(t="slot_validate_missing_render_slot_el",n=u.missingProperty("undefined","render.slot.el"),c(t,n),!1):(t="slot_validate_missing_network",n=u.missingProperty("undefined","network"),c(t,n),!1):(t="slot_validate_missing_identifiers",n=u.missingProperty("undefined","identifiers"),c(t,n),!1):(t="slot_validate_missing_sizes",n=u.missingProperty("undefined","sizes"),c(t,n),!1):(t="slot_validate_missing_definition",n=u.missingProperty("undefined","environment.definition"),c(t,n),!1):(t="slot_validate_missing_device",n=u.missingProperty("undefined","environment.device"),c(t,n),!1):(t="slot_validate_missing_environment",n=u.missingProperty(t,"environment"),c(t,n),!1)):(t="slot_validate_missing_name",n=u.missingProperty("undefined","name"),c(t,n),!1)}function o(e){if("_out_of_page"===e.type)return!0;var t=e.environment.device,n=e.definition.sizes&&e.definition.sizes[t];if(!n||!n.length){var r="slot_validation_no_appropriate_sizes",o=u.definition.noAppropriateSizes(e.name,t);return c(r,o),!1}return!0}function i(e){if(!l(e.identifiers)){var t="slot_validation_invalid_identifier",n=u.invalidIdentifiers(e.name);return c(t,n),!1}return!0}function a(e){if(!d(e.network)){var t="slot_validation_invalid_network",n=u.invalidNetwork(e.name);return c(t,n),!1}return!0}function s(e){var t=e.definition.render.slot.el;if(!t.tagName||"HTML"===t.tagName){var n="slot_validation_invalid_slot_el",r=u.definition.invalidSlotEl(e.name);return c(n,r),!1}return!0}function c(e,t){p.compile({type:"warn",name:e,error:{msg:t}})}var u=e("../lang").err.slots,l=e("@condenast/atp-utl/type/isObject"),d=e("@condenast/atp-utl/type/isNumber"),p=e("../reporting");t.exports=n},{"../lang":23,"../reporting":28,"@condenast/atp-utl/type/isNumber":81,"@condenast/atp-utl/type/isObject":82}],36:[function(e,t){function n(e){var t=e||i(),n=a(t);return u(t),n?r():o()}function r(){var e={blocked:!0,installed:!0};return d.set("AdbBlocked",1,{expires:8760}),l(e),e}function o(){var e={blocked:!1};return d.get("AdbBlocked")?(d.get("AdbInstalled")||d.set("AdbInstalled",1,{expires:8760}),e.installed=!0):e.installed=!1,l(e),e}function i(){var e=document.createElement("div");return e.setAttribute("class","pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links"),e.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"),document.body.appendChild(e)}function a(e){var t=c(e),n=s(e);return!!document.body.getAttribute("abp")||t||n}function s(e){return null===e.offsetParent||0===e.offsetHeight||0===e.offsetWidth||0===e.clientHeight||0===e.clientWidth}function c(e){var t=window.getComputedStyle(e);return"none"===t.getPropertyValue("display")||"hidden"===t.getPropertyValue("visibility")}function u(e){return e.parentNode.removeChild(e)}function l(e){var t=e.blocked,n=e.installed,r={ctx_abk_blocked:t,ctx_abk_installed:n},o={type:"info",name:"adBlock"};e.blocked&&(o.type="error",r.msg=f()),o.meta=r,(t||n)&&p.compile(o)}var d=e("@condenast/atp-utl/cookies"),p=e("../reporting"),f=e("../lang").err.adBlock.detected;t.exports={check:n}},{"../lang":23,"../reporting":28,"@condenast/atp-utl/cookies":51}],37:[function(e,t){function n(e,t){var n=t||{};if(n.overwrites)return n.overwrites;var o={slug:n.slug,variantUriHigh:n.channel+"_"+n.subChannel+"_"+n.templateType,variantUriMed:n.channel+"_"+n.templateType,variantUriLow:n.templateType};return r(e,o)}function r(e,t){return e[t.slug]||e[t.variantUriHigh]||e[t.variantUriMed]||e[t.variantUriLow]||e.__default||e._default}t.exports={getVariantFromURI:n}},{}],38:[function(e,t){function n(e){return new Promise(function(t){p=e,document.querySelector(b)||a(),g({path:"window.Sparrow",poll:{limit:e&&e.timeout||15e3},onReady:function(){r(),t(f)},onFailure:function(e){console.warn("[ cns metrics plugin Sparrow ]",e.message),t(e.message)}})})}function r(){f=new window.Sparrow(p),window._sparrow=f,window.SparrowCache&&window.SparrowCache.pixels&&window.SparrowCache.pixels.push(f),o(y()),i()}function o(e){if(_())var t=window.performance.getEntries(),n=t.filter(function(e){return/sparrow.min.js/.test(e.name)})[0];var r={campaign:"cns_ads",name:"library_sparrow",type:"info",meta:{requestStart:n&&n.startTime||y(),requestEnd:n&&n.responseEnd||y(),init:e}};s(r)}function i(){w.length&&(w.shift().call(),w.length&&i())}function a(){var e=document.createElement("script");e.className="cns-metrics-sparrow",e.async=!0,e.src="//pixel.condenastdigital.com/sparrow.min.js",document.head.appendChild(e)}function s(e){var t,n=d(e);return c(e)?(t=u(n),f?l(t):w.push(l.bind(null,t)),!0):!1}function c(e){var t=e.campaign&&e.name&&e.type;return!!t}function u(e){return e.meta=e.meta||{},e.meta._logType=e.type,e}function l(e){f.track(e.campaign,e.name,e.meta)}function d(e){return v(e,function(t,n){h(t)?d(t):e[n]=m(t,"_")}),e}var p,f,g=e("@condenast/atp-utl/objects/ready"),m=e("@condenast/atp-utl/strings/slugify"),h=e("@condenast/atp-utl/type/isObject"),v=e("@condenast/atp-utl/loop"),y=e("@condenast/atp-utl/feature").performance.now,_=e("@condenast/atp-utl/feature").isGetEntriesEnabled,b="script[src$='sparrow.min.js']",w=[];t.exports={code:"sprw",setup:n,emit:s}},{"@condenast/atp-utl/feature":39,"@condenast/atp-utl/loop":40,"@condenast/atp-utl/objects/ready":41,"@condenast/atp-utl/strings/slugify":42,"@condenast/atp-utl/type/isObject":43}],39:[function(e,t){"use strict";function n(){try{return window.localStorage.setItem("testKey","1"),window.localStorage.removeItem("testKey"),!0}catch(e){return!1}}function r(){return!!(window&&window.performance&&window.performance.getEntries)}function o(e){var t=e||window,n=t.performance,r=n&&n.now&&n.now(),o=!r&&n&&t.performance.timing,i=o&&t.performance.timing.navigationStart,a=i&&Date.now()-i;return r||i&&a||null}t.exports={isStorageEnabled:n,isGetEntriesEnabled:r,performance:{now:o}}},{}],40:[function(e,t){"use strict";function n(e,t){function n(){for(var n=0;e>n;n++)t(n)}var o="object"==typeof e,i="number"==typeof e&&e%1===0,a="function"==typeof t;

if(!o&&!i)return!1;if(!a)throw new Error("Loop() must be passed a callback function as a second argument");return i?n():r(e,t)}var r=e("lodash.map");t.exports=n},{"lodash.map":114}],41:[function(e,t){"use strict";function n(e){function t(i){var a;return r>=u?(clearTimeout(n),void c(i,e)):Date.now()-l>d?(clearTimeout(n),void s(e)):(a=o[r],i[a]?(clearTimeout(n),r++,void t(i[a])):void(n=setTimeout(function(){t(i)},e.poll.every)))}i(e),a(e);var n,r=0,o=e.path.split("."),u=o.length,l=Date.now(),d=e.poll.limit,p=e.obj||window;t(p)}function r(e,t){return t?typeof e===t:!0}function o(e,t,n){var o=e[t]||!1;return o&&r(o,n)}function i(e){function t(e,t,n){if(!o(e,t,n))throw new Error("[ cns utilities: obj.ready ] the '"+t+"' options property must be of type '"+n+"'")}t(e,"path","string"),t(e,"poll","object"),t(e.poll,"limit","number"),t(e,"onReady","function")}function a(e){function t(e,t,n){o(e,t,n)||(e[t]=u[t])}t(e,"onFailure","function"),t(e.poll,"every","number")}function s(e){e.onFailure(new Error("[ cns utilities: obj.ready ] path was not found beforetime limit of "+e.poll.limit+" milliseconds expired."))}function c(e,t){return r(e,t.type)?void t.onReady(e):void t.onFailure(new Error("[ cns utilities: obj.ready ] path is ready but not of type '"+t.type+"'."))}var u={every:100,onFailure:function(e){console.error(e.message)}};t.exports=n},{}],42:[function(e,t){"use strict";function n(e,t){if(!e)return void 0;if("string"!=typeof e)return e;var n="string"==typeof t?t:"-",r=new RegExp("^["+n+"]+|["+n+"]+$","g"),o=e.toLowerCase();return o=o.replace(/[^a-z0-9]+/g,n),o=o.replace(r,""),o=o.replace("["+n+"]1/gi",n)}t.exports=n},{}],43:[function(e,t){"use strict";function n(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}t.exports=n},{}],44:[function(e,t){function n(e,t,n){return h=n&&n.cnsVersion,g.setup(window.cns),Promise.resolve(t)}function r(e){function t(e,t){return p(t)&&p(e)?e.concat(t):void 0}function n(e,n,r){if("plugins"===r&&d(e)){var o={};return f(n,function(n,r){var i=e[r];o[r]=l({mergeables:[i,n],merger:t})}),o}}return l({mergeables:[e.global,e.property],merger:n})}function o(e){return e.controller.setup(e.config,e.version),m[e.name]=e,e}function i(e){var t,n,r,o;a(e)&&(e.type=e.type||"info",t="production"===e.environment,n="warn"===e.type,r="flow"===e.type,o=/CNS_TRACK/.test(document.location.search),e.meta&&h&&(e.meta.cns=h),!t&&!o||n||r||u(e),g[e.type](e.campaign,{event:e.name,data:e.error||e.meta}))}function a(e){var t=["campaign","environment","name"],n=!0;return f(t,function(t){e[t]||(s(t,e),n=!1)}),n}function s(e,t){g.error("cns_metrics",{message:c(e),event:t})}function c(e){return'[ cns metrics ] An event was emitted with an invalid "'+e+'" property. See "event" property for more details.'}function u(e){f(m,function(t){t.controller.emit(e)})}var l=e("@condenast/atp-utl/objects/merge"),d=e("@condenast/atp-utl/type/isObject"),p=e("@condenast/atp-utl/type/isArray"),f=e("@condenast/atp-utl/loop"),g=e("@condenast/atp-utl/logger"),m={},h=null;t.exports={setup:n,merge:r,extend:o,api:{emit:i}}},{"@condenast/atp-utl/logger":59,"@condenast/atp-utl/loop":60,"@condenast/atp-utl/objects/merge":62,"@condenast/atp-utl/type/isArray":68,"@condenast/atp-utl/type/isObject":82}],45:[function(e,t){function n(e){return new Promise(function(t,n){var s,c=r(e);return c.result?(s=i(e),o(s.dataType)?(l(s),void t()):void a(s).then(t)["catch"](n)):void n(new Error(c.error))})}function r(e){return e&&e.URL&&e.URL.length?e.jsonpCallback&&!p(e.jsonpCallback)?{result:!1,error:g.badJSONPCallback}:{result:!0}:{result:!1,error:g.noURL}}function o(e){var t=e?e.toLowerCase():!1;return"jsonp"===t}function i(e){var t=f(e,!0);return t.method=t.method&&t.method.toUpperCase()||"GET",t.dataType=t.dataType&&t.dataType.toUpperCase()||"JSON",t}function a(e){return new Promise(function(t,n){var r,o=new XMLHttpRequest;o.open(e.method,e.URL),o.withCredentials=e.cors||!1,o.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<300?t(this.responseText):n(s(this)))},c(e.method,o),r=u(e.method,e.data),o.send(r)})}function s(e){var t=e.status;return new Error(e.statusText?g.requestError(e.statusText.hostname,t,e.statusText.code):g.undefinedError(t,e.responseText))}function c(e,t){return"POST"===e?t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"PATCH"===e||"PUT"===e?t.setRequestHeader("Content-Type","application/json"):null}function u(e,t){return"POST"===e?encodeURI(t):"DELETE"===e?null:t}function l(e){var t="cnsJSONPCallback"+Math.round(1e3*Math.random()),n=d(e.data),r=document.createElement("script");window[t]=e.jsonpCallback,r.src=e.URL+"?callback="+t+n,document.body.appendChild(r)}function d(e){var t=[],n="";for(var r in e)e.hasOwnProperty(r)&&t.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t.length&&(n="&"+t.join("&")),n}var p=e("../type/isFunction"),f=e("../objects/clone"),g={noURL:"[ atp utl ajax ] The parameter object contained an invalid URL.",badJSONPCallback:"[ atp utl ajax ] The parameter object contained a jsonpCallback that was not a function.",requestError:function(e,t,n){return"[ atp utl ajax ] Ajax request to "+e+" failed with status "+t+" and code "+n+"."},undefinedError:function(e){return"[ atp utl ajax ] Ajax request failed with a code of "+e+" and has no error object."}};t.exports=n},{"../objects/clone":61,"../type/isFunction":76}],46:[function(e,t){function n(e,t){function n(){if(!l){var t,r=Date.now(),o=r-s;o>u&&(t=o%u,s=r-t,e())}d||(a=window.requestAnimationFrame(n))}function r(){d=!0,window.cancelAnimationFrame(a)}function o(){l=!0}function i(){l=!1}var a,s=Date.now(),c=t||60,u=1e3/c,l=!1,d=!1;return n(),{kill:r,pause:o,resume:i}}t.exports=n},{}],47:[function(e,t){function n(e,t){if(!Array.isArray(e))throw new Error("Array.has() can only accept an array as a first argument.");return-1!==e.indexOf(t)?!0:!1}t.exports=n},{}],48:[function(e,t){function n(e,t){var n="Array.merge() can only accept an array of arrays as a first argument";if(!i(e))throw new Error(n);return o(e,function(t,n){void 0!==t&&i(t)||(e[n]=[])}),t?r.apply(null,e):Array.prototype.concat.apply([],e)}var r=e("lodash.union"),o=e("../../loop"),i=e("../../type/isArray");t.exports=n},{"../../loop":60,"../../type/isArray":68,"lodash.union":119}],49:[function(e,t){function n(e){r(e,"",{expires:-1})}var r=e("../set");t.exports=n},{"../set":52}],50:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],51:[function(e,t){var n=e("./get"),r=e("./set"),o=e("./del");t.exports={get:n,set:r,del:o}},{"./del":49,"./get":50,"./set":52}],52:[function(e,t){function n(e,t,n){if(!e)return void 0;var i=n||{},a=t||!0,s=!!i.encode||!0,c=s?encodeURIComponent(a):a,u=e+"="+c,l=[u];return i.path=i.path||"/",i.expires=r(i.expires)||0,l=o(l,i),document.cookie=l.join("; "),u}function r(e){var t=a(e)?new Date(+new Date+36e5*e):e;return t=i(t)?t.toUTCString():""}function o(e,t){var n=e;return n.push("expires="+t.expires),n.push("path="+t.path),n=t.domain?n.push("domain="+t.domain)&&n:n,n=t.secure?n.push("secure")&&n:n}var i=e("../../type/isDate"),a=e("../../type/isNumber");t.exports=n},{"../../type/isDate":73,"../../type/isNumber":81}],53:[function(e,t){function n(e){var t=null;try{var n=e.contentDocument||e.contentWindow.document;t=n.body.innerHTML}catch(r){}return null!==t}t.exports={isFriendly:n}},{}],54:[function(e,t){function n(){return!!(window&&window.performance&&window.performance.getEntries)}t.exports={isGetEntriesEnabled:n}},{}],55:[function(e,t){var n=e("./performance"),r=e("./getEntries").isGetEntriesEnabled,o=e("./localStorage").isStorageEnabled;t.exports={isStorageEnabled:o,isGetEntriesEnabled:r,performance:n}},{"./getEntries":54,"./localStorage":56,"./performance":57}],56:[function(e,t){function n(){try{return window.localStorage.setItem("testKey","1"),window.localStorage.removeItem("testKey"),!0}catch(e){return!1}}t.exports={isStorageEnabled:n}},{}],57:[function(e,t,n){function r(){return Date.now()-p.performance.timing.navigationStart}function o(e){return g.filter(function(t){return t.entryType===e})}function i(e){return g.filter(function(t){return t.name===e})}function a(){return g}function s(e){g.push({name:e,entryType:"mark",startTime:p.performance.now(),duration:0})}function c(e,t,n){var r=i(t).pop(),o=i(n).pop();r&&o&&g.push({name:e,entryType:"measure",startTime:r.startTime,duration:o.startTime-r.startTime})}function u(e,t){function n(t){return t.entryType!==e}function r(n){return n.entryType===e&&n.name!==t}var o=g.filter(n),i=g.filter(r);return t?void(g=o.concat(i)):void(g=o)}function l(e){u("measure",e)}function d(e){u("mark",e)}var p="undefined"!=typeof window?window:n;p.performance=p.performance||{};var f=p.performance;f.timing=f.timing||{},f.timing.navigationStart=f.timing.navigationStart||Date.now();var g=[];f.now=f.now||p.performance.webkitNow||f.msNow||f.mozNow||r,f.mark=f.mark||f.webkitMark||s,f.getEntries=f.getEntries||f.webkitGetEntries||a,f.getEntriesByType=f.getEntriesByType||f.webkitGetEntriesByType||o,f.getEntriesByName=f.getEntriesByName||f.webkitGetEntriesByName||i,f.measure=f.measure||f.webkitMeasure||c,f.clearMeasures=f.clearMeasures||f.webkitClearMeasures||l,f.clearMarks=f.clearMarks||f.webkitClearMarks||d,t.exports=p.performance},{}],58:[function(e,t,n){arguments[4][6][0].apply(n,arguments)},{"../type/isFunction":76,dup:6}],59:[function(e,t){function n(e){f=l().CNS_LOG||!1;var t=window;e&&d(e)&&(t=e),t.log={on:c,off:u}}function r(e,t,n){return p.length>=100&&p.shift(),p.push([e,new Date,"["+t+"]",n]),o()}function o(){if(f&&p.length){p.sort(i);for(var e=p.length;e--;)(p[e][0]===f||"all"===f)&&(a(p[e]),p.splice(e,1))}}function i(e,t){return e[1]===t[1]?0:e[1]>t[1]?-1:1}function a(e){var t="flow"===e[0]?"info":e[0];return window.console[t](s(e[1]),e[2],e[3])}function s(e){var t=e.getHours(),n=e.getMinutes(),r=e.getSeconds(),o=e.getMilliseconds(),i=t+":"+n+":"+r+":"+o;return i}function c(e){f=e||"all",o()}function u(){f=!1}var l=e("../parse"),d=e("../type/isPlainObject"),p=[],f=!1;t.exports={setup:n,warn:r.bind(null,"warn"),error:r.bind(null,"error"),info:r.bind(null,"info"),flow:r.bind(null,"flow"),on:c,off:u}},{"../parse":65,"../type/isPlainObject":83}],60:[function(e,t){function n(e,t){function n(){for(var n=0;e>n;n++)t(n)}var o="object"==typeof e,i="number"==typeof e&&e%1===0,a="function"==typeof t;if(!o&&!i)return!1;if(!a)throw new Error("Loop() must be passed a callback function as a second argument");return i?n():r(e,t)}var r=e("lodash.map");t.exports=n},{"lodash.map":114}],61:[function(e,t){function n(e,t,n,i){if(!o(e))throw new Error("Objects.Clone: The first parameter to clone must be an object");return r(e,t,n,i)}var r=e("lodash.clone"),o=e("../../type/isPlainObject/");t.exports=n},{"../../type/isPlainObject/":83,"lodash.clone":107}],62:[function(e,t){function n(e){var t=[{}];return r(e.mergeables,function(e){t.push(e)}),e.merger&&t.push(e.merger),o.apply(null,t)}var r=e("lodash.map"),o=e("lodash.merge");t.exports=n},{"lodash.map":114,"lodash.merge":115}],63:[function(e,t){function n(e,t){function n(e,t){return null===t?e:e?typeof e!=typeof t?t:i(t)?t:o(t)?r({},e,t,n):void 0:t}return r({},e,t,n)}var r=e("lodash.merge"),o=e("../../type/isPlainObject"),i=e("../../type/isArray");t.exports=n},{"../../type/isArray":68,"../../type/isPlainObject":83,"lodash.merge":115}],64:[function(e,t){function n(e){for(var t=window,n=0;n<e.length;n++)if(t=t[e[n]],!t)return void 0;return t}function r(e){function t(){var a=n(o);return a?(clearTimeout(r),void u(a,e)):Date.now()-i>l?(clearTimeout(r),void c(e)):void(r=setTimeout(function(){t()},e.poll.every))}a(e),s(e);var r,o=e.path.split("."),i=Date.now(),l=e.poll.limit;t()}function o(e,t){return t?typeof e===t:!0}function i(e,t,n){var r=e[t]||!1;return r&&o(r,n)}function a(e){function t(e,t,n){if(!i(e,t,n))throw new Error("[ cns utilities: obj.ready ] the '"+t+"' options property must be of type '"+n+"'")}t(e,"path","string"),t(e,"poll","object"),t(e.poll,"limit","number"),t(e,"onReady","function")}function s(e){function t(e,t,n){i(e,t,n)||(e[t]=l[t])}t(e,"onFailure","function"),t(e.poll,"every","number")}function c(e){e.onFailure(new Error("[ cns utilities: obj.ready ] "+e.path+" was not found before time limit of "+e.poll.limit+" milliseconds expired."))}function u(e,t){return o(e,t.type)?void t.onReady(e):void t.onFailure(new Error("[ cns utilities: obj.ready ] path is ready but not of type '"+t.type+"'."))}var l={every:100,onFailure:function(e){console.error(e.message)}};t.exports=r},{}],65:[function(e,t){function n(e){var t,n=e?e:document.location.search,o=n.slice(1,n.length),i=o.split("&"),a={};return r(i,function(e){t=e.split("="),a[t[0]]=t[1]}),a}var r=e("../loop");t.exports=n},{"../loop":60}],66:[function(e,t){function n(e,t){if(!e)return void 0;if("string"!=typeof e)return e;var n="string"==typeof t?t:"-",r=new RegExp("[^a-z0-9]+","g"),o=e.toLowerCase(),i=o.replace(r,n);return i}t.exports=n},{}],67:[function(e,t){function n(e,t){return e&&t?e.substring(0,t.length)===t:!1}t.exports=n},{}],68:[function(e,t){function n(e){return!!e&&Array.isArray(e)}t.exports=n},{}],69:[function(e,t){function n(e){return!(!e||9!==e.nodeType)}t.exports=n},{}],70:[function(e,t){function n(e){return!(!e||1!==e.nodeType)}t.exports=n},{}],71:[function(e,t){function n(e){return!(!e||"undefined"==typeof e.item)}t.exports=n},{}],72:[function(e,t){function n(e){return!!(e&&e.document&&r(e.document))}var r=e("../isDOMDocumentObject");t.exports=n},{"../isDOMDocumentObject":69}],73:[function(e,t){function n(e){return!!e&&e instanceof Date&&!isNaN(e.valueOf())}t.exports=n},{}],74:[function(e,t){function n(e){return o(e)||r(e)}var r=e("../isDOMDocumentObject"),o=e("../isJQDocumentObject");t.exports=n},{"../isDOMDocumentObject":69,"../isJQDocumentObject":77}],75:[function(e,t){function n(e){return o(e)||r(e)}var r=e("../isDOMElement"),o=e("../isJQElement");t.exports=n},{"../isDOMElement":70,"../isJQElement":78}],76:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],77:[function(e,t){function n(e){return!!(e&&r(e)&&o(e[0]))}var r=e("../isJQObject"),o=e("../isDOMDocumentObject");t.exports=n},{"../isDOMDocumentObject":69,"../isJQObject":79}],78:[function(e,t){function n(e){return!(!e||!r(e)||1!==e[0].nodeType)}var r=e("../isJQObject");t.exports=n},{"../isJQObject":79}],79:[function(e,t){function n(e){return!(!e||!e.jquery)}t.exports=n},{}],80:[function(e,t){function n(e){return!!(e&&r(e)&&o(e[0]))}var r=e("../isJQObject"),o=e("../isDOMWindowObject");t.exports=n},{"../isDOMWindowObject":72,"../isJQObject":79}],81:[function(e,t){function n(e){return"number"==typeof e}t.exports=n},{}],82:[function(e,t){function n(e){var t=typeof e;return!!e&&("object"===t||"function"===t)}t.exports=n},{}],83:[function(e,t){function n(e){return!!e&&e.constructor===Object}t.exports=n},{}],84:[function(e,t){function n(e){return"string"==typeof e}t.exports=n},{}],85:[function(e,t){function n(e){return o(e)||r(e)}var r=e("../isDOMWindowObject"),o=e("../isJQWindowObject");t.exports=n},{"../isDOMWindowObject":72,"../isJQWindowObject":80}],86:[function(e,t){function n(e){var t=e.parentNode;return s(e)&&s(e.parentNode)?a(e)?!1:o(e)?!0:a(t)?!1:o(t)?!0:i(t)&&c(e)?!0:n(t,e.getBoundingClientRect()):!0}function r(e,t){return document.defaultView.getComputedStyle(e,null)[t]}function o(e){return!!["opacity","display","visibility"].filter(function(t){return/(0|none|hidden)/.test(r(e,t))}).length}function i(e){return/(hidden|scroll)/.test(window.getComputedStyle(e,null).getPropertyValue("overflow"))}function a(e){return"BODY"===e.nodeName}function s(e){return document.documentElement.contains(e)}function c(e){var t=e.getBoundingClientRect(),n=e.parentElement.getBoundingClientRect();return t.top>n.bottom||t.bottom<n.top||t.left>n.right||t.right<n.left}t.exports={isHidden:n}},{}],87:[function(e,t,n){(function(r,o){!function(e,r){"object"==typeof n&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.ES6Promise=r()}(this,function(){"use strict";function t(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function n(e){return"function"==typeof e}function i(e){W=e}function a(e){$=e}function s(){return function(){return r.nextTick(p)}}function c(){return"undefined"!=typeof G?function(){G(p)}:d()}function u(){var e=0,t=new K(p),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=p,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(p,1)}}function p(){for(var e=0;H>e;e+=2){var t=Z[e],n=Z[e+1];t(n),Z[e]=void 0,Z[e+1]=void 0}H=0}function f(){try{var e=Function("return this")().require("vertx");return G=e.runOnLoop||e.runOnContext,c()}catch(t){return d()}}function g(e,t){var n=this,r=new this.constructor(h);void 0===r[te]&&I(r);var o=n._state;if(o){var i=arguments[o-1];$(function(){return R(o,r,i,n._result)})}else C(n,r,e,t);return r}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(h);return j(n,e),n}function h(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(t){return ie.error=t,ie}}function b(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function w(e,t,n){$(function(e){var r=!1,o=b(n,t,function(n){r||(r=!0,t!==n?j(e,n):q(e,n))},function(t){r||(r=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,T(e,o))},e)}function x(e,t){t._state===re?q(e,t._result):t._state===oe?T(e,t._result):C(t,void 0,function(t){return j(e,t)},function(t){return T(e,t)})}function k(e,t,r){t.constructor===e.constructor&&r===g&&t.constructor.resolve===m?x(e,t):r===ie?(T(e,ie.error),ie.error=null):void 0===r?q(e,t):n(r)?w(e,t,r):q(e,t)}function j(e,n){e===n?T(e,v()):t(n)?k(e,n,_(n)):q(e,n)}function S(e){e._onerror&&e._onerror(e._result),O(e)}function q(e,t){e._state===ne&&(e._result=t,e._state=re,0!==e._subscribers.length&&$(O,e))}function T(e,t){e._state===ne&&(e._state=oe,e._result=t,$(S,e))}function C(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+re]=n,o[i+oe]=r,0===i&&e._state&&$(O,e)}function O(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,a=0;a<t.length;a+=3)r=t[a],o=t[a+n],r?R(n,r,o,i):o(i);e._subscribers.length=0}}function P(e,t){try{return e(t)}catch(n){return ie.error=n,ie}}function R(e,t,r,o){var i=n(r),a=void 0,s=void 0,c=void 0,u=void 0;if(i){if(a=P(r,o),a===ie?(u=!0,s=a.error,a.error=null):c=!0,t===a)return void T(t,y())}else a=o,c=!0;t._state!==ne||(i&&c?j(t,a):u?T(t,s):e===re?q(t,a):e===oe&&T(t,a))}function E(e,t){try{t(function(t){j(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function A(){return ae++}function I(e){e[te]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function D(){return new Error("Array Methods must be provided an Array")}function M(e){return new se(this,e).promise}function N(e){var t=this;return new t(B(e)?function(n,r){for(var o=e.length,i=0;o>i;i++)t.resolve(e[i]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function L(e){var t=this,n=new t(h);return T(n,e),n}function V(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=ce}var U=void 0;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var B=U,H=0,G=void 0,W=void 0,$=function(e,t){Z[H]=e,Z[H+1]=t,H+=2,2===H&&(W?W(p):ee())},J="undefined"!=typeof window?window:void 0,Q=J||{},K=Q.MutationObserver||Q.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),ee=void 0;ee=X?s():K?u():Y?l():void 0===J&&"function"==typeof e?f():d();var te=Math.random().toString(36).substring(2),ne=void 0,re=1,oe=2,ie={error:null},ae=0,se=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[te]||I(this.promise),B(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?q(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&q(this.promise,this._result))):T(this.promise,D())}return e.prototype._enumerate=function(e){for(var t=0;this._state===ne&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var o=_(e);if(o===g&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===ce){var i=new n(h);k(i,e,o),this._willSettleAt(i,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ne&&(this._remaining--,e===oe?T(r,n):this._result[t]=n),0===this._remaining&&q(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(re,t,e)},function(e){return n._settledAt(oe,t,e)})},e}(),ce=function(){function e(t){this[te]=A(),this._result=this._state=void 0,this._subscribers=[],h!==t&&("function"!=typeof t&&V(),this instanceof e?E(this,t):z())}return e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype["finally"]=function(e){var t=this,n=t.constructor;return t.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})},e}();return ce.prototype.then=g,ce.all=M,ce.race=N,ce.resolve=m,ce.reject=L,ce._setScheduler=i,ce._setAsap=a,ce._asap=$,ce.polyfill=F,ce.Promise=ce,ce})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:120}],88:[function(e,t){function n(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}t.exports=n},{}],89:[function(e,t){function n(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}t.exports=n},{}],90:[function(e,t){function n(e,t){for(var n=-1,r=e.length,o=Array(r);++n<r;)o[n]=t(e[n],n,e);return o}t.exports=n},{}],91:[function(e,t){function n(e,t){return null==t?e:r(t,o(t),e)}var r=e("lodash._basecopy"),o=e("lodash.keys");t.exports=n},{"lodash._basecopy":94,"lodash.keys":112}],92:[function(e,t){function n(e){return null==e?"":e+""}function r(e,t,n){var r=typeof e;return"function"==r?void 0===t?e:w(e,t,n):null==e?y:"object"==r?a(e):void 0===t?_(e):s(e,t)}function o(e,t,n){if(null!=e){void 0!==n&&n in g(e)&&(t=[n]);for(var r=0,o=t.length;null!=e&&o>r;)e=e[t[r++]];return r&&r==o?e:void 0}}function i(e,t,n){var r=t.length,o=r,i=!n;if(null==e)return!o;for(e=g(e);r--;){var a=t[r];if(i&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<o;){a=t[r];var s=a[0],c=e[s],u=a[1];if(i&&a[2]){if(void 0===c&&!(s in e))return!1}else{var l=n?n(c,u,s):void 0;if(!(void 0===l?b(u,c,n,!0):l))return!1}}return!0}function a(e){var t=d(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null==e?!1:e[n]===r&&(void 0!==r||n in g(e))}}return function(e){return i(e,t)}}function s(e,t){var n=x(e),r=p(e)&&f(t),i=e+"";return e=m(e),function(a){if(null==a)return!1;var s=i;if(a=g(a),!(!n&&r||s in a)){if(a=1==e.length?a:o(a,l(e,0,-1)),null==a)return!1;s=h(e),a=g(a)}return a[s]===t?void 0!==t||s in a:b(t,a[s],void 0,!0)}}function c(e){return function(t){return null==t?void 0:t[e]}}function u(e){var t=e+"";return e=m(e),function(n){return o(n,e,t)}}function l(e,t,n){var r=-1,o=e.length;t=null==t?0:+t||0,0>t&&(t=-t>o?0:o+t),n=void 0===n||n>o?o:+n||0,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(o);++r<o;)i[r]=e[r+t];return i}function d(e){for(var t=k(e),n=t.length;n--;)t[n][2]=f(t[n][1]);return t}function p(e,t){var n=typeof e;if("string"==n&&S.test(e)||"number"==n)return!0;if(x(e))return!1;var r=!j.test(e);return r||null!=t&&e in g(t)}function f(e){return e===e&&!v(e)}function g(e){return v(e)?e:Object(e)}function m(e){if(x(e))return e;var t=[];return n(e).replace(q,function(e,n,r,o){t.push(r?o.replace(T,"$1"):n||e)}),t}function h(e){var t=e?e.length:0;return t?e[t-1]:void 0}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function y(e){return e}function _(e){return p(e)?c(e):u(e)}var b=e("lodash._baseisequal"),w=e("lodash._bindcallback"),x=e("lodash.isarray"),k=e("lodash.pairs"),j=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,S=/^\w*$/,q=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,T=/\\(\\)?/g;t.exports=r},{"lodash._baseisequal":99,"lodash._bindcallback":101,"lodash.isarray":109,"lodash.pairs":116}],93:[function(e,t){(function(n){function r(e,t,n,i,f,m,v){var y;if(n&&(y=f?n(e,i,f):n(e)),void 0!==y)return y;if(!u(e))return e;var _=g(e);if(_){if(y=a(e),!t)return l(e,y)}else{var b=B.call(e),x=b==w;if(b!=j&&b!=h&&(!x||f))return z[b]?c(e,b,t):f?e:{};if(y=s(x?{}:e),!t)return p(y,e)}m||(m=[]),v||(v=[]);for(var k=m.length;k--;)if(m[k]==e)return v[k];return m.push(e),v.push(y),(_?d:o)(e,function(o,i){y[i]=r(o,t,n,i,e,m,v)}),y}function o(e,t){return f(e,t,m)}function i(e){var t=new H(e.byteLength),n=new G(t);return n.set(new G(e)),t}function a(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&U.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function s(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Object),new t}function c(e,t,n){var r=e.constructor;switch(t){case O:return i(e);case y:case _:return new r(+e);case P:case R:case E:case A:case I:case D:case M:case N:case L:var o=e.buffer;return new r(n?i(o):o,e.byteOffset,e.length);case k:case T:return new r(e);case S:var a=new r(e.source,V.exec(e));a.lastIndex=e.lastIndex}return a}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=e("lodash._arraycopy"),d=e("lodash._arrayeach"),p=e("lodash._baseassign"),f=e("lodash._basefor"),g=e("lodash.isarray"),m=e("lodash.keys"),h="[object Arguments]",v="[object Array]",y="[object Boolean]",_="[object Date]",b="[object Error]",w="[object Function]",x="[object Map]",k="[object Number]",j="[object Object]",S="[object RegExp]",q="[object Set]",T="[object String]",C="[object WeakMap]",O="[object ArrayBuffer]",P="[object Float32Array]",R="[object Float64Array]",E="[object Int8Array]",A="[object Int16Array]",I="[object Int32Array]",D="[object Uint8Array]",M="[object Uint8ClampedArray]",N="[object Uint16Array]",L="[object Uint32Array]",V=/\w*$/,z={};z[h]=z[v]=z[O]=z[y]=z[_]=z[P]=z[R]=z[E]=z[A]=z[I]=z[k]=z[j]=z[S]=z[T]=z[D]=z[M]=z[N]=z[L]=!0,z[b]=z[w]=z[x]=z[q]=z[C]=!1;var F=Object.prototype,U=F.hasOwnProperty,B=F.toString,H=n.ArrayBuffer,G=n.Uint8Array;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arraycopy":88,"lodash._arrayeach":89,"lodash._baseassign":91,"lodash._basefor":97,"lodash.isarray":109,"lodash.keys":112}],94:[function(e,t){function n(e,t,n){n||(n={});for(var r=-1,o=t.length;++r<o;){var i=t[r];n[i]=e[i]}return n}t.exports=n},{}],95:[function(e,t){function n(e,t){return p(e,t,u)}function r(e){return function(t){return null==t?void 0:t[e]}}function o(e,t){return function(n,r){var o=n?f(n):0;if(!a(o))return e(n,r);for(var i=t?o:-1,c=s(n);(t?i--:++i<o)&&r(c[i],i,c)!==!1;);return n}}function i(e){return function(t,n,r){for(var o=s(t),i=r(t),a=i.length,c=e?a:-1;e?c--:++c<a;){var u=i[c];if(n(o[u],u,o)===!1)break}return t}}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}function s(e){return c(e)?e:Object(e)}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=e("lodash.keys"),l=9007199254740991,d=o(n),p=i(),f=r("length");t.exports=d},{"lodash.keys":112}],96:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}function o(e,t,i,s){s||(s=[]);for(var l=-1,d=e.length;++l<d;){var p=e[l];n(p)&&a(p)&&(i||u(p)||c(p))?t?o(p,t,i,s):r(s,p):i||(s[s.length]=p)}return s}function i(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&s(d(e))}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&l>=e}var c=e("lodash.isarguments"),u=e("lodash.isarray"),l=9007199254740991,d=i("length");t.exports=o},{"lodash.isarguments":108,"lodash.isarray":109}],97:[function(e,t){function n(e){return function(t,n,r){for(var o=-1,i=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++o];if(n(i[c],c,i)===!1)break}return t}}var r=n();t.exports=r},{}],98:[function(e,t){function n(e,t,n){if(t!==t)return r(e,n);for(var o=n-1,i=e.length;++o<i;)if(e[o]===t)return o;return-1}function r(e,t,n){for(var r=e.length,o=t+(n?0:-1);n?o--:++o<r;){var i=e[o];if(i!==i)return o}return-1}t.exports=n},{}],99:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function o(e,t,r,a,s,c){return e===t?!0:null==e||null==t||!u(e)&&!n(t)?e!==e&&t!==t:i(e,t,o,r,a,s,c)}function i(e,t,n,r,o,i,u){var p=l(e),m=l(t),h=g,v=g;p||(h=j.call(e),h==f?h=_:h!=_&&(p=d(e))),m||(v=j.call(t),v==f?v=_:v!=_&&(m=d(t)));var y=h==_,b=v==_,w=h==v;if(w&&!p&&!y)return s(e,t,h);if(!o){var x=y&&k.call(e,"__wrapped__"),S=b&&k.call(t,"__wrapped__");if(x||S)return n(x?e.value():e,S?t.value():t,r,o,i,u)}if(!w)return!1;i||(i=[]),u||(u=[]);for(var q=i.length;q--;)if(i[q]==e)return u[q]==t;i.push(e),u.push(t);var T=(p?a:c)(e,t,n,r,o,i,u);return i.pop(),u.pop(),T}function a(e,t,n,o,i,a,s){var c=-1,u=e.length,l=t.length;if(u!=l&&!(i&&l>u))return!1;for(;++c<u;){var d=e[c],p=t[c],f=o?o(i?p:d,i?d:p,c):void 0;if(void 0!==f){if(f)continue;return!1}if(i){if(!r(t,function(e){return d===e||n(d,e,o,i,a,s)}))return!1}else if(d!==p&&!n(d,p,o,i,a,s))return!1}return!0}function s(e,t,n){switch(n){case m:case h:return+e==+t;case v:return e.name==t.name&&e.message==t.message;case y:return e!=+e?t!=+t:e==+t;case b:case w:return e==t+""}return!1}function c(e,t,n,r,o,i,a){var s=p(e),c=s.length,u=p(t),l=u.length;if(c!=l&&!o)return!1;for(var d=c;d--;){var f=s[d];if(!(o?f in t:k.call(t,f)))return!1}for(var g=o;++d<c;){f=s[d];var m=e[f],h=t[f],v=r?r(o?h:m,o?m:h,f):void 0;if(!(void 0===v?n(m,h,r,o,i,a):v))return!1;g||(g="constructor"==f)}if(!g){var y=e.constructor,_=t.constructor;if(y!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _))return!1}return!0}function u(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var l=e("lodash.isarray"),d=e("lodash.istypedarray"),p=e("lodash.keys"),f="[object Arguments]",g="[object Array]",m="[object Boolean]",h="[object Date]",v="[object Error]",y="[object Number]",_="[object Object]",b="[object RegExp]",w="[object String]",x=Object.prototype,k=x.hasOwnProperty,j=x.toString;t.exports=o},{"lodash.isarray":109,"lodash.istypedarray":111,"lodash.keys":112}],100:[function(e,t){function n(e,t){var n=-1,s=r,c=e.length,u=!0,l=u&&c>=a,d=l?i():null,p=[];d?(s=o,u=!1):(l=!1,d=t?[]:p);e:for(;++n<c;){var f=e[n],g=t?t(f,n,e):f;if(u&&f===f){for(var m=d.length;m--;)if(d[m]===g)continue e;t&&d.push(g),p.push(f)}else s(d,g,0)<0&&((t||l)&&d.push(g),p.push(f))}return p}var r=e("lodash._baseindexof"),o=e("lodash._cacheindexof"),i=e("lodash._createcache"),a=200;t.exports=n},{"lodash._baseindexof":98,
"lodash._cacheindexof":102,"lodash._createcache":104}],101:[function(e,t){function n(e,t,n){if("function"!=typeof e)return r;if(void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,o){return e.call(t,n,r,o)};case 4:return function(n,r,o,i){return e.call(t,n,r,o,i)};case 5:return function(n,r,o,i,a){return e.call(t,n,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function r(e){return e}t.exports=n},{}],102:[function(e,t){function n(e,t){var n=e.data,o="string"==typeof t||r(t)?n.set.has(t):n.hash[t];return o?0:-1}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}t.exports=n},{}],103:[function(e,t){function n(e){return i(function(t,n){var i=-1,a=null==t?0:n.length,s=a>2?n[a-2]:void 0,c=a>2?n[2]:void 0,u=a>1?n[a-1]:void 0;for("function"==typeof s?(s=r(s,u,5),a-=2):(s="function"==typeof u?u:void 0,a-=s?1:0),c&&o(n[0],n[1],c)&&(s=3>a?void 0:s,a=1);++i<a;){var l=n[i];l&&e(t,l,s)}return t})}var r=e("lodash._bindcallback"),o=e("lodash._isiterateecall"),i=e("lodash.restparam");t.exports=n},{"lodash._bindcallback":101,"lodash._isiterateecall":106,"lodash.restparam":117}],104:[function(e,t){(function(n){function r(e){var t=e?e.length:0;for(this.data={hash:u(null),set:new c};t--;)this.push(e[t])}function o(e){var t=this.data;"string"==typeof e||a(e)?t.set.add(e):t.hash[e]=!0}function i(e){return u&&c?new r(e):null}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var s=e("lodash._getnative"),c=s(n,"Set"),u=s(Object,"create");r.prototype.push=o,t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._getnative":105}],105:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return a(n)?n:void 0}function o(e){return i(e)&&p.call(e)==s}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function a(e){return null==e?!1:o(e)?f.test(l.call(e)):n(e)&&c.test(e)}var s="[object Function]",c=/^\[object .+?Constructor\]$/,u=Object.prototype,l=Function.prototype.toString,d=u.hasOwnProperty,p=u.toString,f=RegExp("^"+l.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},{}],106:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&a(l(e))}function o(e,t){return e="number"==typeof e||c.test(e)?+e:-1,t=null==t?u:t,e>-1&&e%1==0&&t>e}function i(e,t,n){if(!s(n))return!1;var i=typeof t;if("number"==i?r(n)&&o(t,n.length):"string"==i&&t in n){var a=n[t];return e===e?e===a:a!==a}return!1}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var c=/^\d+$/,u=9007199254740991,l=n("length");t.exports=i},{}],107:[function(e,t){function n(e,t,n,a){return t&&"boolean"!=typeof t&&i(e,t,n)?t=!1:"function"==typeof t&&(a=n,n=t,t=!1),"function"==typeof n?r(e,t,o(n,a,3)):r(e,t)}var r=e("lodash._baseclone"),o=e("lodash._bindcallback"),i=e("lodash._isiterateecall");t.exports=n},{"lodash._baseclone":93,"lodash._bindcallback":101,"lodash._isiterateecall":106}],108:[function(e,t){function n(e){return o(e)&&g.call(e,"callee")&&(!h.call(e,"callee")||m.call(e)==l)}function r(e){return null!=e&&a(e.length)&&!i(e)}function o(e){return c(e)&&r(e)}function i(e){var t=s(e)?m.call(e):"";return t==d||t==p}function a(e){return"number"==typeof e&&e>-1&&e%1==0&&u>=e}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return!!e&&"object"==typeof e}var u=9007199254740991,l="[object Arguments]",d="[object Function]",p="[object GeneratorFunction]",f=Object.prototype,g=f.hasOwnProperty,m=f.toString,h=f.propertyIsEnumerable;t.exports=n},{}],109:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){var n=null==e?void 0:e[t];return s(n)?n:void 0}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&v>=e}function i(e){return a(e)&&g.call(e)==u}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){return null==e?!1:i(e)?m.test(p.call(e)):n(e)&&l.test(e)}var c="[object Array]",u="[object Function]",l=/^\[object .+?Constructor\]$/,d=Object.prototype,p=Function.prototype.toString,f=d.hasOwnProperty,g=d.toString,m=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h=r(Array,"isArray"),v=9007199254740991,y=h||function(e){return n(e)&&o(e.length)&&g.call(e)==c};t.exports=y},{}],110:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t){return i(e,t,s)}function o(e){var t;if(!n(e)||d.call(e)!=c||a(e)||!l.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var o;return r(e,function(e,t){o=t}),void 0===o||l.call(e,o)}var i=e("lodash._basefor"),a=e("lodash.isarguments"),s=e("lodash.keysin"),c="[object Object]",u=Object.prototype,l=u.hasOwnProperty,d=u.toString;t.exports=o},{"lodash._basefor":97,"lodash.isarguments":108,"lodash.keysin":113}],111:[function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&i>=e}function r(e){return!!e&&"object"==typeof e}function o(e){return r(e)&&n(e.length)&&!!P[E.call(e)]}var i=9007199254740991,a="[object Arguments]",s="[object Array]",c="[object Boolean]",u="[object Date]",l="[object Error]",d="[object Function]",p="[object Map]",f="[object Number]",g="[object Object]",m="[object RegExp]",h="[object Set]",v="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",x="[object Float64Array]",k="[object Int8Array]",j="[object Int16Array]",S="[object Int32Array]",q="[object Uint8Array]",T="[object Uint8ClampedArray]",C="[object Uint16Array]",O="[object Uint32Array]",P={};P[w]=P[x]=P[k]=P[j]=P[S]=P[q]=P[T]=P[C]=P[O]=!0,P[a]=P[s]=P[_]=P[c]=P[b]=P[u]=P[l]=P[d]=P[p]=P[f]=P[g]=P[m]=P[h]=P[v]=P[y]=!1;var R=Object.prototype,E=R.toString;t.exports=o},{}],112:[function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}function r(e){return null!=e&&i(v(e))}function o(e,t){return e="number"==typeof e||p.test(e)?+e:-1,t=null==t?h:t,e>-1&&e%1==0&&t>e}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&h>=e}function a(e){for(var t=c(e),n=t.length,r=n&&e.length,a=!!r&&i(r)&&(d(e)||l(e)),s=-1,u=[];++s<n;){var p=t[s];(a&&o(p,r)||g.call(e,p))&&u.push(p)}return u}function s(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&i(t)&&(d(e)||l(e))&&t||0;for(var n=e.constructor,r=-1,a="function"==typeof n&&n.prototype===e,c=Array(t),u=t>0;++r<t;)c[r]=r+"";for(var p in e)u&&o(p,t)||"constructor"==p&&(a||!g.call(e,p))||c.push(p);return c}var u=e("lodash._getnative"),l=e("lodash.isarguments"),d=e("lodash.isarray"),p=/^\d+$/,f=Object.prototype,g=f.hasOwnProperty,m=u(Object,"keys"),h=9007199254740991,v=n("length"),y=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r(e)?a(e):s(e)?m(e):[]}:a;t.exports=y},{"lodash._getnative":105,"lodash.isarguments":108,"lodash.isarray":109}],113:[function(e,t){function n(e,t){return e="number"==typeof e||c.test(e)?+e:-1,t=null==t?d:t,e>-1&&e%1==0&&t>e}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function o(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function i(e){if(null==e)return[];o(e)||(e=Object(e));var t=e.length;t=t&&r(t)&&(s(e)||a(e))&&t||0;for(var i=e.constructor,c=-1,u="function"==typeof i&&i.prototype===e,d=Array(t),p=t>0;++c<t;)d[c]=c+"";for(var f in e)p&&n(f,t)||"constructor"==f&&(u||!l.call(e,f))||d.push(f);return d}var a=e("lodash.isarguments"),s=e("lodash.isarray"),c=/^\d+$/,u=Object.prototype,l=u.hasOwnProperty,d=9007199254740991;t.exports=i},{"lodash.isarguments":108,"lodash.isarray":109}],114:[function(e,t){function n(e,t){var n=-1,r=o(e)?Array(e.length):[];return u(e,function(e,o,i){r[++n]=t(e,o,i)}),r}function r(e){return function(t){return null==t?void 0:t[e]}}function o(e){return null!=e&&i(p(e))}function i(e){return"number"==typeof e&&e>-1&&e%1==0&&d>=e}function a(e,t,r){var o=l(e)?s:n;return t=c(t,r,3),o(e,t)}var s=e("lodash._arraymap"),c=e("lodash._basecallback"),u=e("lodash._baseeach"),l=e("lodash.isarray"),d=9007199254740991,p=r("length");t.exports=a},{"lodash._arraymap":90,"lodash._basecallback":92,"lodash._baseeach":95,"lodash.isarray":109}],115:[function(e,t){function n(e){return!!e&&"object"==typeof e}function r(e,t,i,s,u){if(!c(e))return e;var d=a(t)&&(f(t)||m(t)),p=d?void 0:h(t);return l(p||t,function(a,c){if(p&&(c=a,a=t[c]),n(a))s||(s=[]),u||(u=[]),o(e,t,c,r,i,s,u);else{var l=e[c],f=i?i(l,a,c,e,t):void 0,g=void 0===f;g&&(f=a),void 0===f&&(!d||c in e)||!g&&(f===f?f===l:l!==l)||(e[c]=f)}}),e}function o(e,t,n,r,o,i,s){for(var c=i.length,l=t[n];c--;)if(i[c]==l)return void(e[n]=s[c]);var d=e[n],h=o?o(d,l,n,e,t):void 0,y=void 0===h;y&&(h=l,a(l)&&(f(l)||m(l))?h=f(d)?d:a(d)?u(d):[]:g(l)||p(l)?h=p(d)?v(d):g(d)?d:{}:y=!1),i.push(l),s.push(h),y?e[n]=r(h,l,o,i,s):(h===h?h!==d:d===d)&&(e[n]=h)}function i(e){return function(t){return null==t?void 0:t[e]}}function a(e){return null!=e&&s(_(e))}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&y>=e}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var u=e("lodash._arraycopy"),l=e("lodash._arrayeach"),d=e("lodash._createassigner"),p=e("lodash.isarguments"),f=e("lodash.isarray"),g=e("lodash.isplainobject"),m=e("lodash.istypedarray"),h=e("lodash.keys"),v=e("lodash.toplainobject"),y=9007199254740991,_=i("length"),b=d(r);t.exports=b},{"lodash._arraycopy":88,"lodash._arrayeach":89,"lodash._createassigner":103,"lodash.isarguments":108,"lodash.isarray":109,"lodash.isplainobject":110,"lodash.istypedarray":111,"lodash.keys":112,"lodash.toplainobject":118}],116:[function(e,t){function n(e){return r(e)?e:Object(e)}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function o(e){e=n(e);for(var t=-1,r=i(e),o=r.length,a=Array(o);++t<o;){var s=r[t];a[t]=[s,e[s]]}return a}var i=e("lodash.keys");t.exports=o},{"lodash.keys":112}],117:[function(e,t){function n(e,t){if("function"!=typeof e)throw new TypeError(r);return t=o(void 0===t?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=o(n.length-t,0),a=Array(i);++r<i;)a[r]=n[t+r];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,n[0],a);case 2:return e.call(this,n[0],n[1],a)}var s=Array(t+1);for(r=-1;++r<t;)s[r]=n[r];return s[t]=a,e.apply(this,s)}}var r="Expected a function",o=Math.max;t.exports=n},{}],118:[function(e,t){function n(e){return r(e,o(e))}var r=e("lodash._basecopy"),o=e("lodash.keysin");t.exports=n},{"lodash._basecopy":94,"lodash.keysin":113}],119:[function(e,t){var n=e("lodash._baseflatten"),r=e("lodash._baseuniq"),o=e("lodash.restparam"),i=o(function(e){return r(n(e,!1,!0))});t.exports=i},{"lodash._baseflatten":96,"lodash._baseuniq":100,"lodash.restparam":117}],120:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){m&&f&&(m=!1,f.length?g=f.concat(g):h=-1,g.length&&s())}function s(){if(!m){var e=o(a);m=!0;for(var t=g.length;t;){for(f=g,g=[];++h<t;)f&&f[h].run();h=-1,t=g.length}f=null,m=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function u(){}var l,d,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(e){d=r}}();var f,g=[],m=!1,h=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new c(e,t)),1!==g.length||m||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.prependListener=u,p.prependOnceListener=u,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],121:[function(e){!function(t){e("es6-promise").polyfill();var n=e("@condenast/atp-utl/feature"),r=t.cns.queue,o=t.cns=e("../../assets/"),i={campaign:"cns",name:"loaded",type:"info",environment:"production",meta:{cns:"2.25.6",feature_storage:n.isStorageEnabled(),feature_get_entries:n.isGetEntriesEnabled(),feature_performance_now:null!==n.performance.now()}},a=i.meta;o.queue.set(r),o.setup({identifiers:{human:"arstechnica",human_slug:"arstechnica",human_var:"arstechnica"}},{services:{ads:{version:"2.18.5",plugins:{ars_accelerator:{version:"0.2.0"},amazon_match_buy:{version:"1.1.1"},cne_interlude:{version:"1.0.0"},adobe_audience_manager:{version:"1.0.0"},index_exchange:{version:"1.2.2"},proximic:{version:"0.1.2"},"4d":{version:"0.5.1"},polar:{version:"0.2.0"}}},metrics:{version:"1.1.0",plugins:{sparrow:{version:"1.2.0"}}}},built:"Fri Mar 01 2019 16:18:22 GMT-0500 (EST)",version:"2.25.6"}).then(function(){o.extend({name:"ads",controller:e("@condenast/atp-cns-service-ads"),version:"2.18.5",cnsVersion:"2.25.6",config:{ad_unit:{map:{content_type:{bundle:["_default","home","liveblog","index","forum"],article:["article"],contributor:[],gallery:[],search:[],"site-info":[]},position:{hero:["post_nav_liveblog","post_nav"],"mid-content":["inline_index","article_in_text"],"mid-gallery":[],rail:["native_xrail","siderail","siderail_btf"],footer:["footer"],interstitial:["_out_of_page"],sponsor:[],legacy:["_default"]}},generate_path:'function(opts) { return "3379/conde.ars/" + opts.position + "/" + opts.category + "/" + opts.contentType + "/" + opts.instance; }',generate_legacy_path:'function(opts) { return "3379/ars." + opts.suffix + "/" + opts.channel }'},request_vp_range:{__default:{desktop:800,tablet:800,mobile:400}},refresh_vp_range:{__default:{desktop:400,tablet:400,mobile:400}},network:3379,timers:{plugin_requests_max:1e3,ad_request_queuer:100,refresh_delay:3e4},slot:{sets:{mt_article:["_out_of_page","hero","rail","mid_content","footer","cm_article_footer","cm_article_mid_content","cm_drawer_call_to_action","cm_site_header_call_to_action"],mt_contributor:["_out_of_page","hero","rail","mid_content","footer","cm_drawer_call_to_action","cm_site_header_call_to_action"],mt_gallery:["_out_of_page","hero","rail","mid_content","footer","cm_drawer_call_to_action","cm_site_header_call_to_action"],_default:["post_nav","siderail","inline_index","_out_of_page","native_xrail","footer"],home:["post_nav","siderail","inline_index","_out_of_page","native_xrail","footer"],article:["post_nav","siderail","native_xrail","article_in_text","_out_of_page","footer"],liveblog:["post_nav_liveblog","siderail"]},types:{_default:{suffix:"dart",link_by_instance:!0,request_in_vp_only:!0,style:{background:"#000000"},mods:{"advertiser-ids|26217775":{refresh:!1},"advertiser-ids|1446519415":{refresh:!1}},render:{slot:{top:"body"}}},_out_of_page:{_default:{refresh:!1,request_in_vp_only:!1,can_be_hidden:!0}},inline_index:{_default:{sizes:{desktop:["728x90","970x250","970x400","930x400","930x370","1440x520","9x2","10x1","1200x370"],tablet:["728x90","970x250","970x400","930x400","1440x520","9x2","10x1"],mobile:["300x50","320x50","320x150","320x250","300x250","9x2","10x1"]},static_refresh_size:!0,render:{slot:{top:".ad.ad_fullwidth"}}}},post_nav_liveblog:{_default:{request_in_vp_only:!1,static_refresh_size:!0,sizes:{desktop:["728x90","970x60","970x250","970x90"],tablet:["728x90"],mobile:["300x50","320x50","300x150","320x150"]},render:{slot:{top:".ad.ad_liveblog_crown"}}}},post_nav:{_default:{sizes:{desktop:["728x90","970x60","970x250","930x400","930x370","970x90","970x420","9x1","9x3","9x9","1200x370"],tablet:["728x90","970x60","970x250","930x400","970x90","970x420","9x1","9x9"],mobile:["300x50","320x50","300x150","320x150","320x270","9x1","9x9"]},request_in_vp_only:!1,static_refresh_size:!0,data:{"jivox-ad-id":"constellation-crown"},render:{desktop:{slot:{top:".ad.ad_crown"}},tablet:{slot:{top:".ad.ad_crown"}},mobile:{slot:{top:".ad.ad_crown"}}}}},article_in_text:{_default:{static_refresh_size:!0,sizes:{desktop:!1,tablet:!1,mobile:["300x50","300x250","320x50","300x150","320x150","320x270","9x2","9x3","10x1"]},render:{slot:{top:".ad.ad_instream"}}}},native_xrail:{_default:{id:"native-xrail300x140_frame",refresh:!1,sizes:{desktop:["300x140"],tablet:["300x140"],mobile:["300x140"]},render:{slot:{top:".ad_native.ad_native_xrail"}}}},siderail:{_default:{static_refresh_size:!0,sizes:{desktop:["300x250","300x600","300x1050"],tablet:!1,mobile:!1},render:{desktop:{slot:{top:".ad.ad_xrail"}}}}},siderail_btf:{_default:{static_refresh_size:!0,sizes:{desktop:["300x250","300x600","300x1050"],tablet:!1,mobile:!1},render:{desktop:{slot:{top:".ad.ad_xrail"}}}}},footer:{_default:{sizes:{desktop:["728x90","970x250","9x2","10x1"],tablet:["728x90","9x2","10x1"],mobile:["300x50","320x50","300x250","9x2","10x1"]},render:{mobile:{slot:{top:".ad.ad_footer"}}}}}},__auid_one:"ars"},modifiers:{buildAdPath:'function buildAdPath(opts) { return "3379/conde.ars/" + opts.position + "/" + opts.category + "/" + opts.contentType + "/" + opts.instance; }',contentTypeMap:{article:["article"],bundle:["_default","home","liveblog","index","forum"],contributor:[],gallery:[],search:[],"site-info":[]},positionMap:{hero:["post_nav_liveblog","post_nav"],"mid-content":["inline_index","article_in_text"],"mid-gallery":[],rail:["native_xrail","siderail","siderail_btf"],footer:["footer"],interstitial:["_out_of_page"],sponsor:[],legacy:["_default"]}}}}).then(function(t){var n="cns_ads";a[n]="2.18.5";var r=[];return r.push(t.extend({name:"ars_accelerator",controller:e("@condenast/atp-cns-service-ads-plugin-ars-accelerator"),version:"0.2.0",config:{endpoint:"//cdn.accelerator.arsdev.net/h/"}})),a[n+"_ars_accelerator"]="0.2.0",r.push(t.extend({name:"amazon_match_buy",controller:e("@condenast/atp-cns-service-ads-plugin-amazon-match-buy"),version:"1.1.1",config:{amazon_id:"3035",endpoint:"//c.amazon-adsystem.com/aax2/apstag.js",eligible_sizes:["300x250","300x600","320x50","728x90","970x250"],isNotGdprCompliant:!0}})),a[n+"_amazon_match_buy"]="1.1.1",r.push(t.extend({name:"cne_interlude",controller:e("@condenast/atp-cns-service-ads-plugin-cne-interlude"),version:"1.0.0",config:{brand:"arstechnica"}})),a[n+"_cne_interlude"]="1.0.0",r.push(t.extend({name:"adobe_audience_manager",controller:e("@condenast/atp-cns-service-ads-plugin-adobe-audience-manager"),version:"1.0.0",config:{}})),a[n+"_adobe_audience_manager"]="1.0.0",r.push(t.extend({name:"index_exchange",controller:e("@condenast/atp-cns-service-ads-plugin-index-exchange"),version:"1.2.2",config:{isNotGdprCompliant:!0}})),a[n+"_index_exchange"]="1.2.2",r.push(t.extend({name:"proximic",controller:e("@condenast/atp-cns-service-ads-plugin-proximic"),version:"0.1.2",config:{}})),a[n+"_proximic"]="0.1.2",r.push(t.extend({name:"4d",controller:e("@condenast/atp-cns-service-ads-plugin-4d"),version:"0.5.1",config:{}})),a[n+"_4d"]="0.5.1",r.push(t.extend({name:"polar",controller:e("@condenast/atp-cns-service-ads-plugin-polar"),version:"0.2.0",config:{}})),a[n+"_polar"]="0.2.0",Promise.all(r)}).then(function(){o.queue.play("ads")}),o.extend({name:"metrics",controller:e("@condenast/atp-cns-service-metrics"),version:"1.1.0",cnsVersion:"2.25.6",config:{}}).then(function(t){var n="cns_metrics";a[n]="1.1.0";var r=[];return r.push(t.extend({name:"sparrow",controller:e("@condenast/atp-cns-service-metrics-plugin-sparrow"),version:"1.2.0",config:{capturedCookies:[{cookie_key:"amg_user_partner",sparrow_key:"cnid"},{cookie_key:"aam_uuid",sparrow_key:"aam_uuid"},{cookie_key:"ba_opt_out",sparrow_key:"_anonymize"}],capturedQueryParams:["mbid","CNDID","intcid"],capturedHashParams:["intcid"],preinit:["user-context"],meta:{cPd:"function b() { if (window._4d && window._4d.context && window._4d.context.pubdate) { return window._4d.context.pubdate; } else { return undefined; }}",cKh:'function a(o){var n="";if(window._4d&&window._4d.context&&window._4d.context.keywords&&window._4d.context.keywords.list){var t=window._4d.context.keywords.list.filter(function(o){return o.score>.6});n=(t=t.map(function(o){return o.keyword.toLowerCase()})).join(",")}return n}',dim1:"v1.0.25_iframe_query"},events:[{type:["pageview"],selector:"window",meta:{dim1:'function d(){return window._4d&&window._4d.user&&window._4d.user.sg&&window._4d.user.sg.join(",")||undefined}'}},{type:["scroll"],selector:"window"},{type:["timespent"],selector:"window"},{selector:".recirc-list__items",type:["inViewExists"],customMapper:{_c:"variations_recommendations"}},{selector:".recirc-list__items",type:["click"],customMapper:{_c:"variations_recommendations"}},{selector:".summary-item__hed-link[data-recirc-id]",type:["inViewExists"],dataAttrMapper:{dim1:"href",dim5:"data-recirc-id"},customMapper:{_c:"variations_recommendations",_t:"linksIn-view"},meta:{dim2:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;return r.indexOf("#")>0?n(r.substring(0,r.indexOf("#"))):n(r)}})}',dim3:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;var q=r.substring(r.indexOf("intcid=")); if(q.indexOf("?")>-1) {q=q.substring(0,q.lastIndexOf("?"))}; if (q.indexOf("&")>-1) {q=q.substring(0,q.lastIndexOf("&"))}; q=q.split("_"); return (r.indexOf("#")>0 && q.length > 3)?n(q[3]):n("")}return n("")})}',dim4:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;var q=r.substring(r.indexOf("intcid=")); if(q.indexOf("?")>-1) {q=q.substring(0,q.lastIndexOf("?"))}; if (q.indexOf("&")>-1) {q=q.substring(0,q.lastIndexOf("&"))}; q=q.split("_"); return (r.indexOf("#")>0 && q.length > 4)?n(q[4]):n("")}return n("")})}'}},{selector:".summary-item__hed-link[data-recirc-id]",type:["click"],dataAttrMapper:{dim1:"href",dim5:"data-recirc-id"},customMapper:{_c:"variations_recommendations",_t:"linkClick"},meta:{dim2:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;return r.indexOf("#")>0?n(r.substring(0,r.indexOf("#"))):n(r)}})}',dim3:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;var q=r.substring(r.indexOf("intcid=")); if(q.indexOf("?")>-1) {q=q.substring(0,q.lastIndexOf("?"))}; if (q.indexOf("&")>-1) {q=q.substring(0,q.lastIndexOf("&"))}; q=q.split("_"); return (r.indexOf("#")>0 && q.length > 3)?n(q[3]):n("")}return n("")})}',dim4:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;var q=r.substring(r.indexOf("intcid=")); if(q.indexOf("?")>-1) {q=q.substring(0,q.lastIndexOf("?"))}; if (q.indexOf("&")>-1) {q=q.substring(0,q.lastIndexOf("&"))}; q=q.split("_"); return (r.indexOf("#")>0 && q.length > 4)?n(q[4]):n("")}return n("")})}'}},{selector:".summary-item__image-link[data-recirc-id]",type:["click"],dataAttrMapper:{dim1:"href",dim5:"data-recirc-id"},customMapper:{_c:"variations_recommendations",_t:"linkClick"},meta:{dim2:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;return r.indexOf("#")>0?n(r.substring(0,r.indexOf("#"))):n(r)}})}',dim3:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;var q=r.substring(r.indexOf("intcid=")); if(q.indexOf("?")>-1) {q=q.substring(0,q.lastIndexOf("?"))}; if (q.indexOf("&")>-1) {q=q.substring(0,q.lastIndexOf("&"))}; q=q.split("_"); return (r.indexOf("#")>0 && q.length > 3)?n(q[3]):n("")}return n("")})}',dim4:'function cutLink(n,i){return new Promise(function(n){if(i&&i.dim1){var r=i.dim1;var q=r.substring(r.indexOf("intcid=")); if(q.indexOf("?")>-1) {q=q.substring(0,q.lastIndexOf("?"))}; if (q.indexOf("&")>-1) {q=q.substring(0,q.lastIndexOf("&"))}; q=q.split("_"); return (r.indexOf("#")>0 && q.length > 4)?n(q[4]):n("")}return n("")})}'}}],origin:"ars-technica",title:"Ars Technica",environment:"prod",version:"1.2"}})),a[n+"_sparrow"]="1.2.0",Promise.all(r)}).then(function(){o.queue.play("metrics")}).then(function(){o.async("metrics",function(e){e.emit(i)})})})}(window)},{"../../assets/":1,"@condenast/atp-cns-service-ads":22,"@condenast/atp-cns-service-ads-plugin-4d":2,"@condenast/atp-cns-service-ads-plugin-adobe-audience-manager":4,"@condenast/atp-cns-service-ads-plugin-amazon-match-buy":8,"@condenast/atp-cns-service-ads-plugin-ars-accelerator":10,"@condenast/atp-cns-service-ads-plugin-cne-interlude":11,"@condenast/atp-cns-service-ads-plugin-index-exchange":12,"@condenast/atp-cns-service-ads-plugin-polar":13,"@condenast/atp-cns-service-ads-plugin-proximic":14,"@condenast/atp-cns-service-metrics":44,"@condenast/atp-cns-service-metrics-plugin-sparrow":38,"@condenast/atp-utl/feature":55,"es6-promise":87}]},{},[121]);